<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alejandro García Gómez">
<meta name="dcterms.date" content="2026-02-07">

<title>Análisis del grafo de la red de Metro de Madrid</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Proyecto_sql_files/libs/clipboard/clipboard.min.js"></script>
<script src="Proyecto_sql_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Proyecto_sql_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Proyecto_sql_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Proyecto_sql_files/libs/quarto-html/popper.min.js"></script>
<script src="Proyecto_sql_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Proyecto_sql_files/libs/quarto-html/anchor.min.js"></script>
<link href="Proyecto_sql_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Proyecto_sql_files/libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Proyecto_sql_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Proyecto_sql_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Proyecto_sql_files/libs/bootstrap/bootstrap-9e3ffae467580fdb927a41352e75a2e0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="Proyecto_sql_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="Proyecto_sql_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="Proyecto_sql_files/libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="Proyecto_sql_files/libs/datatables-binding-0.34.0/datatables.js"></script>

<script src="Proyecto_sql_files/libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="Proyecto_sql_files/libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="Proyecto_sql_files/libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="Proyecto_sql_files/libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="Proyecto_sql_files/libs/crosstalk-1.2.2/css/crosstalk.min.css" rel="stylesheet">

<script src="Proyecto_sql_files/libs/crosstalk-1.2.2/js/crosstalk.min.js"></script>

<script src="Proyecto_sql_files/libs/d3-4.9.1/d3.min.js"></script>

<script src="Proyecto_sql_files/libs/forceNetwork-binding-0.4.1/forceNetwork.js"></script>



</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#carga-y-limpieza-de-datos" id="toc-carga-y-limpieza-de-datos" class="nav-link active" data-scroll-target="#carga-y-limpieza-de-datos"><span class="header-section-number">1</span> Carga y limpieza de datos</a>
  <ul>
  <li><a href="#nodos" id="toc-nodos" class="nav-link" data-scroll-target="#nodos"><span class="header-section-number">1.1</span> Nodos</a></li>
  <li><a href="#definición-de-las-líneas" id="toc-definición-de-las-líneas" class="nav-link" data-scroll-target="#definición-de-las-líneas"><span class="header-section-number">1.2</span> Definición de las líneas</a></li>
  </ul></li>
  <li><a href="#construcción-del-grafo" id="toc-construcción-del-grafo" class="nav-link" data-scroll-target="#construcción-del-grafo"><span class="header-section-number">2</span> Construcción del grafo</a>
  <ul>
  <li><a href="#transbordos" id="toc-transbordos" class="nav-link" data-scroll-target="#transbordos"><span class="header-section-number">2.1</span> Transbordos</a></li>
  </ul></li>
  <li><a href="#análisis-del-grafo" id="toc-análisis-del-grafo" class="nav-link" data-scroll-target="#análisis-del-grafo"><span class="header-section-number">3</span> Análisis del grafo</a>
  <ul>
  <li><a href="#camino-mínimo-entre-estaciones" id="toc-camino-mínimo-entre-estaciones" class="nav-link" data-scroll-target="#camino-mínimo-entre-estaciones"><span class="header-section-number">3.1</span> Camino mínimo entre estaciones</a></li>
  <li><a href="#diámetro-de-la-red" id="toc-diámetro-de-la-red" class="nav-link" data-scroll-target="#diámetro-de-la-red"><span class="header-section-number">3.2</span> Diámetro de la red</a></li>
  <li><a href="#medidas-de-centralidad" id="toc-medidas-de-centralidad" class="nav-link" data-scroll-target="#medidas-de-centralidad"><span class="header-section-number">3.3</span> Medidas de centralidad</a>
  <ul>
  <li><a href="#grado" id="toc-grado" class="nav-link" data-scroll-target="#grado"><span class="header-section-number">3.3.1</span> Grado</a></li>
  <li><a href="#cercanía" id="toc-cercanía" class="nav-link" data-scroll-target="#cercanía"><span class="header-section-number">3.3.2</span> Cercanía</a></li>
  <li><a href="#intermediación" id="toc-intermediación" class="nav-link" data-scroll-target="#intermediación"><span class="header-section-number">3.3.3</span> Intermediación</a></li>
  <li><a href="#autovector" id="toc-autovector" class="nav-link" data-scroll-target="#autovector"><span class="header-section-number">3.3.4</span> Autovector</a></li>
  <li><a href="#katz-y-pagerank" id="toc-katz-y-pagerank" class="nav-link" data-scroll-target="#katz-y-pagerank"><span class="header-section-number">3.3.5</span> Katz y Pagerank</a></li>
  </ul></li>
  <li><a href="#cluster" id="toc-cluster" class="nav-link" data-scroll-target="#cluster"><span class="header-section-number">3.4</span> Cluster</a></li>
  <li><a href="#análisis-de-vulnerabilidad" id="toc-análisis-de-vulnerabilidad" class="nav-link" data-scroll-target="#análisis-de-vulnerabilidad"><span class="header-section-number">3.5</span> Análisis de vulnerabilidad</a></li>
  </ul></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones"><span class="header-section-number">4</span> Conclusiones</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análisis del grafo de la red de Metro de Madrid</h1>
<p class="subtitle lead">Grado en Matemáticas | Análisis de redes</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alejandro García Gómez </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 7, 2026</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="cell">
<style type="text/css">
p {
  text-align: justify
}
</style>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">file.remove</span>(<span class="st">"metro.sqlite"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Este proyecto modeliza la red del Metro de Madrid como un grafo ponderado para estudiar su conectividad, rutas óptimas, estaciones críticas y fracturación. Se aplican algoritmos clásicos de teoría de grafos para identificar nodos estratégicos, calcular rutas óptimas entre puntos de interés y simular escenarios de fallo. Los resultados se visualizan y se interpretan en términos de planificación de infraestructura.</p>
<p>Partimos de los datos publicados por el <a href="https://opendata.esri.es/datasets/crtm::m4-tramos-1">consorcio regional de transportes</a> que recogen información sobre los tramos de cada línea.</p>
<section id="carga-y-limpieza-de-datos" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Carga y limpieza de datos</h1>
<p>Estos son las librerías de R que emplearemos</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(networkD3)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(htmltools)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggdendro)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dendextend)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Cargamos los datos en una tabla SQL para poder hacer consultas</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="fu">SQLite</span>(), <span class="st">"metro.sqlite"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"M4_Tramos.csv"</span>, <span class="at">quote=</span><span class="st">""</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">"M4_TRAMOS"</span>, datos, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>filas <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con,<span class="st">"SELECT COUNT(OBJECTID) FROM M4_TRAMOS"</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>vars <span class="ot">&lt;-</span> <span class="fu">length</span>(<span class="fu">unlist</span>(<span class="fu">dbGetQuery</span>(con, <span class="st">"pragma table_xinfo(M4_TRAMOS);"</span>)[<span class="st">"cid"</span>]))</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="fu">dbGetQuery</span>(con, <span class="st">"pragma table_xinfo(M4_TRAMOS);"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   cid                    name    type notnull dflt_value pk hidden
1    0                OBJECTID INTEGER       0         NA  0      0
2    1                 IDTRAMO    TEXT       0         NA  0      0
3    2             FECHAACTUAL INTEGER       0         NA  0      0
4    3                    MODO INTEGER       0         NA  0      0
5    4        CODIGOITINERARIO INTEGER       0         NA  0      0
6    5      CODIGOGESTIONLINEA    TEXT       0         NA  0      0
7    6      NUMEROLINEAUSUARIO    TEXT       0         NA  0      0
8    7                 SENTIDO INTEGER       0         NA  0      0
9    8          TIPOITINERARIO INTEGER       0         NA  0      0
10   9          CODIGOESTACION INTEGER       0         NA  0      0
11  10             CODIGOPOSTE INTEGER       0         NA  0      0
12  11             CODIGOANDEN INTEGER       0         NA  0      0
13  12             NUMEROORDEN INTEGER       0         NA  0      0
14  13 IDENTIFICADORTIPOPARADA    TEXT       0         NA  0      0
15  14              TIPOPARADA    TEXT       0         NA  0      0
16  15            DENOMINACION    TEXT       0         NA  0      0
17  16         CODIGOPROVINCIA INTEGER       0         NA  0      0
18  17         CODIGOMUNICIPIO INTEGER       0         NA  0      0
19  18               MUNICIPIO    TEXT       0         NA  0      0
20  19         CORONATARIFARIA    TEXT       0         NA  0      0
21  20               DIRECCION    TEXT       0         NA  0      0
22  21               FECHAALTA INTEGER       0         NA  0      0
23  22             FECHAINICIO INTEGER       0         NA  0      0
24  23                FECHAFIN INTEGER       0         NA  0      0
25  24   LONGITUDTRAMOANTERIOR    REAL       0         NA  0      0
26  25  VELOCIDADTRAMOANTERIOR    REAL       0         NA  0      0
27  26               MODOLINEA INTEGER       0         NA  0      0
28  27      MODOINTERCAMBIADOR INTEGER       0         NA  0      0
29  28    CODIGOINTERCAMBIADOR INTEGER       0         NA  0      0
30  29           CODPROV_LINEA INTEGER       0         NA  0      0
31  30            CODMUN_LINEA INTEGER       0         NA  0      0
32  31                IDFTRAMO    TEXT       0         NA  0      0
33  32       CODIGOOBSERVACION INTEGER       0         NA  0      0
34  33          CODIGOSUBLINEA INTEGER       0         NA  0      0
35  34        DENOMINACION_SAE    TEXT       0         NA  0      0
36  35                IDFLINEA    TEXT       0         NA  0      0
37  36           Shape__Length    REAL       0         NA  0      0</code></pre>
</div>
</div>
<p>El dataset tiene 560 observaciones con 37 variables. Además cada parada está duplicada por cada sentido y línea por lo que será necesario ordenar los datos para poder construir nuestro grafo con la librería <code>igraph</code>. Mostramos las 10 primeras filas:</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>SQL</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> M4_TRAMOS <span class="kw">LIMIT</span> <span class="dv">10</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   OBJECTID             IDTRAMO FECHAACTUAL MODO CODIGOITINERARIO
1         1 4_336284_278__755_I    20251030    4           336284
2         2 4_336285_278__756_I    20251030    4           336285
3         3 4_336284_279__757_I    20251030    4           336284
4         4 4_336285_279__758_I    20251030    4           336285
5         5 4_336284_280__759_I    20251030    4           336284
6         6 4_336285_280__760_I    20251030    4           336285
7         7 4_336284_281__761_I    20251030    4           336284
8         8 4_336285_281__762_I    20251030    4           336285
9         9 4_336280_204__425_I    20251030    4           336280
10       10 4_336281_204__426_I    20251030    4           336281
   CODIGOGESTIONLINEA NUMEROLINEAUSUARIO SENTIDO TIPOITINERARIO CODIGOESTACION
1                 102                10b       1              1            278
2                 102                10b       2              1            278
3                 102                10b       1              1            279
4                 102                10b       2              1            279
5                 102                10b       1              1            280
6                 102                10b       2              1            280
7                 102                10b       1              1            281
8                 102                10b       2              1            281
9                 101                10a       1              1            204
10                101                10a       2              1            204
   CODIGOPOSTE CODIGOANDEN NUMEROORDEN IDENTIFICADORTIPOPARADA TIPOPARADA
1           NA         755           7                      TI          I
2           NA         756           5                      TI          I
3           NA         757           6                      TI          I
4           NA         758           6                      TI          I
5           NA         759           5                      TI          I
6           NA         760           7                      TI          I
7           NA         761           4                      TI          I
8           NA         762           8                      TI          I
9           NA         425          20                      TI          I
10          NA         426           2                      TI          I
             DENOMINACION CODIGOPROVINCIA CODIGOMUNICIPIO  MUNICIPIO
1               LA GRANJA              28               6 ALCOBENDAS
2               LA GRANJA              28               6 ALCOBENDAS
3             LA MORALEJA              28               6 ALCOBENDAS
4             LA MORALEJA              28               6 ALCOBENDAS
5  MARQUES DE LA VALDAVIA              28               6 ALCOBENDAS
6  MARQUES DE LA VALDAVIA              28               6 ALCOBENDAS
7         MANUEL DE FALLA              28               6 ALCOBENDAS
8         MANUEL DE FALLA              28               6 ALCOBENDAS
9     JOAQUIN VILUMBRALES              28               7   ALCORCON
10    JOAQUIN VILUMBRALES              28               7   ALCORCON
   CORONATARIFARIA                               DIRECCION FECHAALTA
1               B1                  Calle de Sepúlveda N 1  20070425
2               B1                  Calle de Sepúlveda N 1  20070425
3               B1                   Avda de la Ermita N 5  20070425
4               B1                   Avda de la Ermita N 5  20070425
5               B1 Calle del Marqués de la Valdavia BLQ 21  20070425
6               B1 Calle del Marqués de la Valdavia BLQ 21  20070425
7               B1            Calle   Manuel de Falla N 59  20070425
8               B1            Calle   Manuel de Falla N 59  20070425
9               B1                Avda de la Libertad N 13  20070425
10              B1                Avda de la Libertad N 13  20070425
   FECHAINICIO FECHAFIN LONGITUDTRAMOANTERIOR VELOCIDADTRAMOANTERIOR MODOLINEA
1     20070426       NA              2061.135                  37.18         4
2     20070426       NA              1497.633                  37.18         4
3     20070426       NA              1325.801                  37.18         4
4     20070426       NA              2057.303                  37.18         4
5     20070426       NA              1514.584                  37.18         4
6     20070426       NA              1319.074                  37.18         4
7     20070426       NA              1108.192                  37.18         4
8     20070426       NA              1525.368                  37.18         4
9     20070426       NA              3272.364                  31.12         4
10    20070426       NA               721.744                  31.12         4
   MODOINTERCAMBIADOR CODIGOINTERCAMBIADOR CODPROV_LINEA CODMUN_LINEA
1                  93                  247            NA           NA
2                  93                  247            NA           NA
3                  93                  249            NA           NA
4                  93                  249            NA           NA
5                  93                  268            NA           NA
6                  93                  268            NA           NA
7                  93                  265            NA           NA
8                  93                  265            NA           NA
9                  93                  240            NA           NA
10                 93                  240            NA           NA
                               IDFTRAMO CODIGOOBSERVACION CODIGOSUBLINEA
1   4__10_B____1_IT_1_4_278__755_TI_I_7                NA             NA
2   4__10_B____2_IT_1_4_278__756_TI_I_5                NA             NA
3   4__10_B____1_IT_1_4_279__757_TI_I_6                NA             NA
4   4__10_B____2_IT_1_4_279__758_TI_I_6                NA             NA
5   4__10_B____1_IT_1_4_280__759_TI_I_5                NA             NA
6   4__10_B____2_IT_1_4_280__760_TI_I_7                NA             NA
7   4__10_B____1_IT_1_4_281__761_TI_I_4                NA             NA
8   4__10_B____2_IT_1_4_281__762_TI_I_8                NA             NA
9  4__10_A____1_IT_1_4_204__425_TI_I_20                NA             NA
10  4__10_A____2_IT_1_4_204__426_TI_I_2                NA             NA
   DENOMINACION_SAE  IDFLINEA Shape__Length
1                   4__10_B__     2061.1254
2                   4__10_B__     1497.6364
3                   4__10_B__     1325.8039
4                   4__10_B__     2057.2937
5                   4__10_B__     1514.5877
6                   4__10_B__     1319.0778
7                   4__10_B__     1108.1875
8                   4__10_B__     1525.3714
9                   4__10_A__     3272.3780
10                  4__10_A__      721.7471</code></pre>
</div>
</div>
<section id="nodos" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="nodos"><span class="header-section-number">1.1</span> Nodos</h2>
<p>El identificador de las estaciones es la variable <code>CODIGOESTACION</code> por lo que podemos extraer la lista de todas las estaciones que serán los nodos. Las estaciones con más de una línea tienen un identificador distinto para cada linea por lo que aparecerán varias veces. Las líneas circulares y las estaciones en la que se cambia de tramo aparecen por duplicado por lo que debemos limpiarlas.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>SQL</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">VIEW</span> Estaciones <span class="kw">AS</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    CODIGOESTACION      <span class="kw">AS</span> Nodos,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    DENOMINACION        <span class="kw">AS</span> Nombre,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    NUMEROLINEAUSUARIO  <span class="kw">AS</span> Linea</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> M4_TRAMOS</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<p>Unimos las líneas divididas o las circulares en una sola.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>remplazo <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"6"</span>  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"6-1"</span>, <span class="st">"6-2"</span>),</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"9"</span>  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"9A"</span>, <span class="st">"9B"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"12"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"12-1"</span>, <span class="st">"12-2"</span>),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"7"</span>  <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"7a"</span>, <span class="st">"7b"</span>),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"10"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"10a"</span>, <span class="st">"10b"</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>Estaciones<span class="sc">$</span>Linea <span class="ot">&lt;-</span> <span class="fu">sapply</span>(Estaciones<span class="sc">$</span>Linea, <span class="cf">function</span>(x) {</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(x <span class="sc">%in%</span> <span class="fu">unlist</span>(remplazo)) <span class="fu">str_sub</span>(<span class="fu">names</span>(<span class="fu">which</span>(<span class="fu">unlist</span>(remplazo)<span class="sc">==</span><span class="fu">toString</span>(x))), <span class="at">end =</span> <span class="sc">-</span><span class="dv">2</span>) <span class="cf">else</span> x</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>Estaciones <span class="ot">&lt;-</span> <span class="fu">unique</span>(Estaciones)</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(Estaciones , <span class="at">rownames=</span><span class="cn">FALSE</span> , <span class="at">options =</span> <span class="fu">list</span>(<span class="at">order =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="dv">0</span>, <span class="st">'asc'</span>))))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-87f479031db3639bc3a2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-87f479031db3639bc3a2">{"x":{"filter":"none","vertical":false,"data":[[278,279,280,281,204,205,209,210,211,212,186,185,287,288,289,296,218,219,220,221,222,223,224,225,226,227,228,229,230,349,231,232,233,234,235,236,305,25,26,145,146,147,149,150,152,153,154,27,74,75,76,77,78,79,80,81,83,84,85,86,87,44,45,46,48,49,51,43,53,54,56,57,59,36,22,24,38,39,41,28,29,31,32,35,238,1,2,4,6,7,9,10,11,12,13,14,15,16,17,18,19,197,198,199,200,201,202,206,207,208,193,194,195,196,162,163,164,165,166,167,168,169,170,172,173,174,175,176,177,178,179,180,181,182,187,188,189,191,192,122,121,123,125,126,127,128,129,130,132,133,134,136,137,139,140,141,144,158,161,89,91,104,105,107,108,110,111,112,113,93,94,95,96,97,98,115,116,117,118,119,120,61,60,62,63,64,65,66,68,69,70,71,72,73,47,50,55,58,20,23,37,40,42,30,33,34,237,3,5,8,159,160,99,21,52,67,82,88,114,124,143,171,190,135,138,142,157,100,90,92,106,109,151,156,148,155,101,102,103,203,295,258,262,263,260,264,265,266,286,274,275,276,277,257,285,261,252,253,254,255,256,267,268,269,270,271,272,273,293,294,259,322,323,324,325,326,345,216,217,213,214,215,183,184,300,290,291,292,282,283,284],["LA GRANJA","LA MORALEJA","MARQUES DE LA VALDAVIA","MANUEL DE FALLA","JOAQUIN VILUMBRALES","PUERTA DEL SUR","PUERTA DEL SUR","PARQUE LISBOA","ALCORCON CENTRAL","PARQUE OESTE","ARGANDA DEL REY","LA POVEDA","BARRIO DEL PUERTO","COSLADA CENTRAL","LA RAMBLA","HOSPITAL DEL HENARES","LORANCA","HOSPITAL DE FUENLABRADA","PARQUE EUROPA","FUENLABRADA CENTRAL","PARQUE DE LOS ESTADOS","ARROYO CULEBRO","CONSERVATORIO","ALONSO DE MENDOZA","GETAFE CENTRAL","JUAN DE LA CIERVA","EL CASAR","LOS ESPARTALES","EL BERCIAL","EL CASAR","EL CARRASCAL","JULIAN BESTEIRO","CASA DEL RELOJ","HOSPITAL SEVERO OCHOA","LEGANES CENTRAL","SAN NICASIO","LA FORTUNA","SIERRA DE GUADALUPE","VILLA DE VALLECAS","ISLAS FILIPINAS","GUZMAN EL BUENO","FRANCOS RODRIGUEZ","ANTONIO MACHADO","PEÑAGRANDE","LACOMA","ARROYOFRESNO","PITIS","CONGOSTO","CANILLEJAS","TORRE ARIAS","SUANZES","CIUDAD LINEAL","PUEBLO NUEVO","QUINTANA","EL CARMEN","VENTAS","NUÑEZ DE BALBOA","RUBEN DARIO","ALONSO MARTINEZ","CHUECA","GRAN VIA","DELICIAS","PALOS DE LA FRONTERA","EMBAJADORES","SOL","CALLAO","VENTURA RODRIGUEZ","LEGAZPI","MONCLOA","ARGÜELLES","BILBAO","ALONSO MARTINEZ","SERRANO","OPERA","BUENOS AIRES","MIGUEL HERNANDEZ","NOVICIADO","SAN BERNARDO","CANAL","VENTAS","MANUEL BECERRA","PRINCIPE DE VERGARA","RETIRO","SOL","PRINCIPE PIO","PLAZA DE CASTILLA","VALDEACEDERAS","ESTRECHO","CUATRO CAMINOS","RIOS ROSAS","BILBAO","TRIBUNAL","GRAN VIA","SOL","TIRSO DE MOLINA","ANTON MARTIN","ESTACION DEL ARTE","ATOCHA","MENENDEZ PELAYO","PACIFICO","PUENTE DE VALLECAS","PLAZA DE ESPAÑA","PRINCIPE PIO","LAGO","BATAN","CASA DE CAMPO","COLONIA JARDIN","PLAZA ELIPTICA","ABRANTES","PAN BENDITO","NUEVOS MINISTERIOS","GREGORIO MARAÑON","ALONSO MARTINEZ","TRIBUNAL","BARRIO DEL PILAR","VENTILLA","PLAZA DE CASTILLA","DUQUE DE PASTRANA","PIO XII","COLOMBIA","CONCHA ESPINA","CRUZ DEL RAYO","AVENIDA DE AMERICA","PRINCIPE DE VERGARA","IBIZA","SAINZ DE BARANDA","ESTRELLA","VINATEROS","ARTILLEROS","PAVONES","VALDEBERNARDO","VICALVARO","SAN CIPRIANO","PUERTA DE ARGANDA","FUENCARRAL","BEGOÑA","CHAMARTIN","CUZCO","SANTIAGO BERNABEU","GUZMAN EL BUENO","CUATRO CAMINOS","VICENTE ALEIXANDRE","MONCLOA","ARGÜELLES","PRINCIPE PIO","PUERTA DEL ANGEL","ALTO DE EXTREMADURA","LUCERO","LAS MUSAS","SAN BLAS","SIMANCAS","ASCAO","PUEBLO NUEVO","PARQUE DE LAS AVENIDAS","CARTAGENA","AVENIDA DE AMERICA","CANAL","FERIA DE MADRID","HERRERA ORIA","OPERA","PUERTA DE TOLEDO","LAGUNA","CARPETANA","OPAÑEL","PLAZA ELIPTICA","LEGAZPI","MENDEZ ALVARO","PACIFICO","CONDE DE CASAL","PIRAMIDES","MARQUES DE VADILLO","URGEL","OPORTO","VISTA ALEGRE","CARABANCHEL","O'DONNELL","MANUEL BECERRA","DIEGO DE LEON","AVENIDA DE AMERICA","REPUBLICA ARGENTINA","NUEVOS MINISTERIOS","GOYA","VELAZQUEZ","LISTA","DIEGO DE LEON","AVENIDA DE AMERICA","PROSPERIDAD","ALFONSO XIII","ARTURO SORIA","ESPERANZA","CANILLAS","MAR DE CRISTAL","SAN LORENZO","PARQUE DE SANTA MARIA","LAVAPIES","PLAZA DE ESPAÑA","SAN BERNARDO","COLON","NUEVA NUMANCIA","ALTO DEL ARENAL","SANTO DOMINGO","QUEVEDO","CUATRO CAMINOS","GOYA","BANCO DE ESPAÑA","SEVILLA","OPERA","TETUAN","ALVARADO","IGLESIA","AEROPUERTO T1-T2-T3","BARAJAS","EUGENIA DE MONTIJO","PORTAZGO","ARGÜELLES","AVENIDA DE LA PAZ","DIEGO DE LEON","CALLAO","SAINZ DE BARANDA","CIUDAD UNIVERSITARIA","ALONSO CANO","NUÑEZ DE BALBOA","PLAZA DE CASTILLA","GARCIA NOBLEJAS","BARRIO DE LA CONCEPCION","GREGORIO MARAÑON","MAR DE CRISTAL","ALUCHE","LA LATINA","ACACIAS","OPORTO","USERA","AVENIDA DE LA ILUSTRACION","COLOMBIA","VALDEZARZA","NUEVOS MINISTERIOS","EMPALME","CAMPAMENTO","CASA DE CAMPO","CUATRO VIENTOS","VALDECARROS","PINAR DEL REY","BAMBU","PINAR DE CHAMARTIN","LA ELIPA","HORTALEZA","MANOTERAS","PINAR DE CHAMARTIN","ESTADIO METROPOLITANO","TRES OLIVOS","MONTECARMELO","LAS TABLAS","RONDA DE LA COMUNICACION","AVIACION ESPAÑOLA","AEROPUERTO T-4","CHAMARTIN","ALAMEDA DE OSUNA","EL CAPRICHO","SAN FRANCISCO","CARABANCHEL ALTO","LA PESETA","ALMENDRALES","HOSPITAL 12 DE OCTUBRE","SAN FERMIN-ORCASUR","CIUDAD DE LOS ANGELES","VILLAVERDE BAJO CRUCE","SAN CRISTOBAL","VILLAVERDE ALTO","LA GAVIA","LAS SUERTES","ARGANZUELA-PLANETARIO","LA ALMUDENA","ALSACIA","AVENIDA DE GUADALAJARA","LAS ROSAS","MIRASIERRA","PACO DE LUCIA","HOSPITAL DE MOSTOLES","MANUELA MALASAÑA","UNIVERSIDAD REY JUAN CARLOS","MOSTOLES CENTRAL","PRADILLO","RIVAS URBANIZACIONES","RIVAS VACIAMADRID","RIVAS FUTURA","SAN FERNANDO","JARAMA","HENARES","BAUNATAL","REYES CATOLICOS","HOSPITAL INFANTA SOFIA"],["10","10","10","10","10","10","12","12","12","12","9","9","7","7","7","7","12","12","12","12","12","12","12","12","12","12","12","12","12","3","12","12","12","12","12","12","11","1","1","7","7","7","7","7","7","7","7","1","5","5","5","5","5","5","5","5","5","5","5","5","5","3","3","3","3","3","3","3","3","4","4","4","4","2","1","1","2","2","2","2","2","2","2","2","R","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","10","10","10","10","10","10","11","11","11","10","10","10","10","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","10","10","10","10","10","6","6","6","6","6","6","6","6","6","7","7","7","7","7","7","7","7","7","8","9","5","5","6","6","6","6","6","6","6","6","5","5","5","5","5","5","6","6","6","6","6","6","4","4","4","4","4","4","4","4","4","4","4","4","4","3","3","4","4","1","1","2","2","2","2","2","2","R","1","1","1","8","8","5","1","3","4","5","5","6","6","7","9","10","7","7","7","8","5","5","5","6","6","7","8","7","8","5","5","5","10","1","8","1","1","2","4","4","4","7","10","10","10","10","10","8","1","5","5","11","11","11","3","3","3","3","3","3","3","1","1","6","2","2","2","2","9","9","12","12","12","12","12","9","9","9","7","7","7","10","10","10"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Nodos<\/th>\n      <th>Nombre<\/th>\n      <th>Linea<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"order":[[0,"asc"]],"columnDefs":[{"className":"dt-right","targets":0},{"name":"Nodos","targets":0},{"name":"Nombre","targets":1},{"name":"Linea","targets":2}],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="definición-de-las-líneas" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="definición-de-las-líneas"><span class="header-section-number">1.2</span> Definición de las líneas</h2>
<p>Para poder crear las aristas del grafo tenemos que definir mejor las líneas agrupando y ordenando las estaciones. Aunque el dataset recoge un trayecto distinto por sentido, a fin de simplificar el grafo, consideraremos solo uno de ellos convirtiendolo en uno no dirigido.</p>
<p>Definimos la cabcera y término de cada una de las lineas. Esto viene indicado por la variable <code>TIPOPARADA</code> donde <code>C</code> indica cabecera y <code>T</code> indica término excepto en las líneas circulares donde esta estación es la misma y se indica con <code>T</code>. Guardamos tanto el nombre como el código de la estación.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>SQL</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">VIEW</span> cabezaTermino <span class="kw">AS</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="kw">DISTINCT</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    O.NUMEROLINEAUSUARIO <span class="kw">AS</span> LINEA,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    O.DENOMINACION       <span class="kw">AS</span> ORIGEN,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    D.DENOMINACION       <span class="kw">AS</span> DESTINO,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    O.CODIGOESTACION     <span class="kw">AS</span> CODORIGEN,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    D.CODIGOESTACION     <span class="kw">AS</span> CODDESTINO</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> M4_TRAMOS <span class="kw">AS</span> O</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">JOIN</span> M4_TRAMOS <span class="kw">AS</span> D</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">ON</span> O.NUMEROLINEAUSUARIO <span class="op">=</span> D.NUMEROLINEAUSUARIO</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    (</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>        O.TIPOPARADA <span class="op">=</span> <span class="st">'C'</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">OR</span> (</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>            LINEA <span class="kw">IN</span> (<span class="st">'12-1'</span>,<span class="st">'12-2'</span>,<span class="st">'6-1'</span>,<span class="st">'6-2'</span>)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">AND</span> O.TIPOPARADA <span class="op">=</span> <span class="st">'T'</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> D.TIPOPARADA <span class="op">=</span> <span class="st">'T'</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>    LINEA</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-c8ac21fe0f77f9f30331" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c8ac21fe0f77f9f30331">{"x":{"filter":"none","vertical":false,"data":[["1","10a","10b","11","12-1","12-2","2","3","4","5","6-1","6-2","7a","7b","8","9A","9B","R"],["PINAR DE CHAMARTIN","TRES OLIVOS","HOSPITAL INFANTA SOFIA","PLAZA ELIPTICA","PUERTA DEL SUR","PUERTA DEL SUR","LAS ROSAS","EL CASAR","ARGÜELLES","ALAMEDA DE OSUNA","LAGUNA","LAGUNA","ESTADIO METROPOLITANO","HOSPITAL DEL HENARES","NUEVOS MINISTERIOS","PACO DE LUCIA","PUERTA DE ARGANDA","OPERA"],["VALDECARROS","PUERTA DEL SUR","TRES OLIVOS","LA FORTUNA","PUERTA DEL SUR","PUERTA DEL SUR","CUATRO CAMINOS","MONCLOA","PINAR DE CHAMARTIN","CASA DE CAMPO","LAGUNA","LAGUNA","PITIS","ESTADIO METROPOLITANO","AEROPUERTO T-4","PUERTA DE ARGANDA","ARGANDA DEL REY","PRINCIPE PIO"],[263,274,284,206,209,209,325,349,54,252,104,104,286,296,155,345,182,237],[295,205,274,305,209,209,42,53,266,103,104,104,154,286,285,182,186,238]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>LINEA<\/th>\n      <th>ORIGEN<\/th>\n      <th>DESTINO<\/th>\n      <th>CODORIGEN<\/th>\n      <th>CODDESTINO<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"order":[[0,"asc"]],"columnDefs":[{"className":"dt-right","targets":[3,4]},{"name":"LINEA","targets":0},{"name":"ORIGEN","targets":1},{"name":"DESTINO","targets":2},{"name":"CODORIGEN","targets":3},{"name":"CODDESTINO","targets":4}],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Con esto ya podemos crear una lista de líneas donde cada linea es una tabla con la información relevante para el grafo. Nos quedamos solo con el sentido 1 y elegimos las variables <code>NUMEROORDEN</code>, <code>DENOMINACION</code>, <code>CODIGOESTACION</code>,<code>LONGITUDTRAMOANTERIOR</code> y <code>VELOCIDADTRAMOANTERIOR</code>. Añadimos manualmente la estación de origen como la primera y las ordenamos. Para ello empleamos la siguiente consulta donde <code>?</code> es el numero de cada una de las lineas.</p>
<div class="cell">
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>SQL</strong></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode sql code-with-copy"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    NUMEROORDEN,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    DENOMINACION,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    CODIGOESTACION,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    LONGITUDTRAMOANTERIOR,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    VELOCIDADTRAMOANTERIOR,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">60</span> <span class="op">*</span> (LONGITUDTRAMOANTERIOR <span class="op">/</span> (<span class="dv">1000</span> <span class="op">*</span> VELOCIDADTRAMOANTERIOR)) <span class="kw">AS</span> TIEMPOTRAMOANTERIOR</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> M4_TRAMOS</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    NUMEROLINEAUSUARIO <span class="op">=</span> ?</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">AND</span> SENTIDO <span class="op">=</span> <span class="st">'1'</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>                       <span class="kw">AS</span> NUMEROORDEN,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    ORIGEN                  <span class="kw">AS</span> DENOMINACION,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    CODORIGEN               <span class="kw">AS</span> CODIGOESTACION,</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">null</span>                    <span class="kw">AS</span> LONGITUDTRAMOANTERIOR,</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">null</span>                    <span class="kw">AS</span> VELOCIDADTRAMOANTERIOR,</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">null</span>                    <span class="kw">AS</span> TIEMPOTRAMOANTERIOR</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> cabezaTermino</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a><span class="kw">WHERE</span></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>    LINEA <span class="op">=</span> ?</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a><span class="kw">ORDER</span> <span class="kw">BY</span></span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>    NUMEROORDEN</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>lineas <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> cabezaTermino<span class="sc">$</span>LINEA) {</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  nombre_linea <span class="ot">&lt;-</span> <span class="fu">as.character</span>(x)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span>(nombre_linea <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"12-2"</span>,<span class="st">"6-2"</span>))){</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    lineas[[nombre_linea]] <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con,SQL,<span class="at">params =</span> <span class="fu">c</span>(nombre_linea,nombre_linea))</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">10a</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">10b</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">11</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">12-1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false" href="">2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false" href="">3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false" href="">4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false" href="">5</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-10" role="tab" aria-controls="tabset-1-10" aria-selected="false" href="">6-1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-11" role="tab" aria-controls="tabset-1-11" aria-selected="false" href="">7a</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-12" role="tab" aria-controls="tabset-1-12" aria-selected="false" href="">7b</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-13-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-13" role="tab" aria-controls="tabset-1-13" aria-selected="false" href="">8</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-14-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-14" role="tab" aria-controls="tabset-1-14" aria-selected="false" href="">9A</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-15-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-15" role="tab" aria-controls="tabset-1-15" aria-selected="false" href="">9B</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-16-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-16" role="tab" aria-controls="tabset-1-16" aria-selected="false" href="">R</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div id="htmlwidget-e3ae958a4a04caba8b35" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-e3ae958a4a04caba8b35">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33],["PINAR DE CHAMARTIN","BAMBU","CHAMARTIN","PLAZA DE CASTILLA","VALDEACEDERAS","TETUAN","ESTRECHO","ALVARADO","CUATRO CAMINOS","RIOS ROSAS","IGLESIA","BILBAO","TRIBUNAL","GRAN VIA","SOL","TIRSO DE MOLINA","ANTON MARTIN","ESTACION DEL ARTE","ATOCHA","MENENDEZ PELAYO","PACIFICO","PUENTE DE VALLECAS","NUEVA NUMANCIA","PORTAZGO","BUENOS AIRES","ALTO DEL ARENAL","MIGUEL HERNANDEZ","SIERRA DE GUADALUPE","VILLA DE VALLECAS","CONGOSTO","LA GAVIA","LAS SUERTES","VALDECARROS"],[263,262,261,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,293,294,295],[null,1061.40368889086,782.3669,1190.463,514.395281290021,560.1044158283059,755.642790028494,537.532393180297,448.179819419585,510.403207934831,744.9503923639641,715.9859864875079,459.654038249673,712.569829882504,331.172249805635,655.275158437598,505.299443064092,674.9789044664,308.981287298045,701.876867823958,539.783078267116,712.551579746634,471.776320047248,579.104597017921,557.8720106569521,654.793467862784,627.765533978312,1344.99593007363,483.080889681132,804.115683007007,590.123126953579,1312.56438014,841.767764235967],[null,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96,22.96],[null,2.773703019749634,2.044512804878049,3.110966027874564,1.344238539956501,1.463687497809162,1.974676280562266,1.4047013759067,1.171201618692295,1.333806292512625,1.946734474818721,1.871043518695578,1.201186511105417,1.86211628018076,0.8654327085513109,1.712391529018113,1.320468927867836,1.76388215452892,0.8074423884095252,1.83417299953996,1.410582957144031,1.862068588188068,1.232864947858662,1.513339539245438,1.457853686385763,1.711132755738983,1.640502266493847,3.514797726673249,1.262406506135362,2.101347603676848,1.542133607021548,3.43004628956446,2.199741544170645]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="htmlwidget-795ecc1ea7eb8b85fec8" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-795ecc1ea7eb8b85fec8">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],["TRES OLIVOS","FUENCARRAL","BEGOÑA","CHAMARTIN","PLAZA DE CASTILLA","CUZCO","SANTIAGO BERNABEU","NUEVOS MINISTERIOS","GREGORIO MARAÑON","ALONSO MARTINEZ","TRIBUNAL","PLAZA DE ESPAÑA","PRINCIPE PIO","LAGO","BATAN","CASA DE CAMPO","COLONIA JARDIN","AVIACION ESPAÑOLA","CUATRO VIENTOS","JOAQUIN VILUMBRALES","PUERTA DEL SUR"],[274,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,257,203,204,205],[null,774.06427894722,1426.99357283185,1032.49338775444,840.409633712516,914.8964103239319,796.313120967398,792.146023988993,869.126023533196,1141.36249995216,598.979563355943,665.824018664706,907.874145680392,1766.07477408003,1918.45850846236,921.38581770468,1310.47638421292,1722.89144784398,1160.6965001513,3272.36404486616,723.81886015532],[null,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12,31.12],[null,1.492411848869962,2.751272955331331,1.990668485387737,1.620327057286342,1.763939094454882,1.535308073844598,1.52727382517158,1.675692847429041,2.200570372658406,1.154844916496034,1.283722401024497,1.750400023805383,3.405028484730135,3.698827458474987,1.776450805343213,2.526625419433651,3.321770143658059,2.237846722656748,6.309185176477172,1.39553764811437]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div id="htmlwidget-3050bc823d56532b15d7" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-3050bc823d56532b15d7">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11],["HOSPITAL INFANTA SOFIA","REYES CATOLICOS","BAUNATAL","MANUEL DE FALLA","MARQUES DE LA VALDAVIA","LA MORALEJA","LA GRANJA","RONDA DE LA COMUNICACION","LAS TABLAS","MONTECARMELO","TRES OLIVOS"],[284,283,282,281,280,279,278,277,276,275,274],[null,1556.36005210617,1085.92207768013,1108.192303689,1514.58431713643,1325.80051622755,2061.13450920886,1498.27975513436,963.718593705577,3081.81098261633,585.909661227336],[null,37.18,37.18,37.18,37.18,37.18,37.18,37.18,37.18,37.18,37.18],[null,2.51160847569581,1.752429388402577,1.788368429837009,2.44419201259241,2.139538218764201,3.326198777636675,2.417880185800473,1.555220968863223,4.973336712129634,0.9455239288230274]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div id="htmlwidget-253051d0ade45af11159" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-253051d0ade45af11159">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7],["PLAZA ELIPTICA","ABRANTES","PAN BENDITO","SAN FRANCISCO","CARABANCHEL ALTO","LA PESETA","LA FORTUNA"],[206,207,208,254,255,256,305],[null,899.641,783.737,588.626,1195.689,944.833,2357.2088],[null,26.52,26.52,26.52,26.52,26.52,26.52],[null,2.035386877828054,1.773160633484163,1.331733031674208,2.705178733031674,2.137631221719457,5.333051583710407]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div id="htmlwidget-8ab75af145ab76518d59" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-8ab75af145ab76518d59">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],["PUERTA DEL SUR","PARQUE LISBOA","ALCORCON CENTRAL","PARQUE OESTE","UNIVERSIDAD REY JUAN CARLOS","MOSTOLES CENTRAL","PRADILLO","HOSPITAL DE MOSTOLES","MANUELA MALASAÑA","LORANCA","HOSPITAL DE FUENLABRADA","PARQUE EUROPA","FUENLABRADA CENTRAL","PARQUE DE LOS ESTADOS","ARROYO CULEBRO","CONSERVATORIO","ALONSO DE MENDOZA","GETAFE CENTRAL","JUAN DE LA CIERVA","EL CASAR","LOS ESPARTALES","EL BERCIAL","EL CARRASCAL","JULIAN BESTEIRO","CASA DEL RELOJ","HOSPITAL SEVERO OCHOA","LEGANES CENTRAL","SAN NICASIO","PUERTA DEL SUR"],[209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,209],[null,841.921,1278.985,1566.99,2607.765,1306.587,698.708,1031.324,1598.815,2902.405,2277.737,719.981,877.74,1300.089,2719.907,950.6420000000001,1215.894,1319.163,1323.72,1572.088,817.647,1199.883,1544.318,1058.544,1363.821,852.28,1100.396,1164.882,3366.349],[null,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53,40.53],[null,1.246367135455218,1.893390081421169,2.319748334566988,3.860495928941525,1.934251665433012,1.034356772760918,1.526756476683938,2.366861584011843,4.296676535899334,3.371927461139896,1.065849000740192,1.29939304219097,1.924632124352331,4.026509252405625,1.407316062176166,1.7999911176906,1.952868985936344,1.959615099925981,2.327295336787565,1.210432272390822,1.776288675055514,2.286185048112509,1.567052553663953,2.018980014803849,1.261702442635085,1.62900962250185,1.724473723168024,4.983492227979275]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<div id="htmlwidget-eb4ff43c29e5b03e2442" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-eb4ff43c29e5b03e2442">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],["LAS ROSAS","AVENIDA DE GUADALAJARA","ALSACIA","LA ALMUDENA","LA ELIPA","VENTAS","MANUEL BECERRA","GOYA","PRINCIPE DE VERGARA","RETIRO","BANCO DE ESPAÑA","SEVILLA","SOL","OPERA","SANTO DOMINGO","NOVICIADO","SAN BERNARDO","QUEVEDO","CANAL","CUATRO CAMINOS"],[325,324,323,322,260,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],[null,900.095,1088.4661,1381.1225,1155.7413,1275.527,627.83,631.042,407.951,543.72,747.072,450.157,339.782,505.944,436.102,401.712,627.705,296.626,706.852,748.273],[null,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22,24.22],[null,2.229797687861272,2.696447811725847,3.421443022295623,2.863108092485549,3.159852188274154,1.555317919075145,1.563274979355904,1.010613542526837,1.346952931461602,1.850715111478117,1.115170107349298,0.8417390586292319,1.253370767960363,1.080351775392238,0.9951577208918249,1.555008257638316,0.7348290668868703,1.751078447563997,1.853690338563171]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<div id="htmlwidget-5c552071a8069f57939d" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-5c552071a8069f57939d">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],["EL CASAR","VILLAVERDE ALTO","SAN CRISTOBAL","VILLAVERDE BAJO CRUCE","CIUDAD DE LOS ANGELES","SAN FERMIN-ORCASUR","HOSPITAL 12 DE OCTUBRE","ALMENDRALES","LEGAZPI","DELICIAS","PALOS DE LA FRONTERA","EMBAJADORES","LAVAPIES","SOL","CALLAO","PLAZA DE ESPAÑA","VENTURA RODRIGUEZ","ARGÜELLES","MONCLOA"],[349,273,272,271,270,269,268,267,43,44,45,46,47,48,49,50,51,52,53],[null,3007.1685,1632.3119,1065.9677,986.936,1137.5782,607.3871,1040.756,1065.5137,738.111558332,532.812252203822,779.545767460873,456.290867837189,952.8626486223581,450.74735397638,566.674148102291,461.140040132393,459.764248973149,632.8537],[null,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99,24.99],[null,7.220092436974791,3.919116206482593,2.559346218487395,2.369594237695078,2.73128019207683,1.458312364945978,2.498813925570228,2.558256182472989,1.772176610641056,1.279261109733066,1.871658505308218,1.095536297328185,2.287785470882012,1.082226540159376,1.360562180317626,1.107178967904905,1.103875747834691,1.519456662665066]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<div id="htmlwidget-ec62c7cad72fa764f094" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-ec62c7cad72fa764f094">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],["ARGÜELLES","SAN BERNARDO","BILBAO","ALONSO MARTINEZ","COLON","SERRANO","VELAZQUEZ","GOYA","LISTA","DIEGO DE LEON","AVENIDA DE AMERICA","PROSPERIDAD","ALFONSO XIII","AVENIDA DE LA PAZ","ARTURO SORIA","ESPERANZA","CANILLAS","MAR DE CRISTAL","SAN LORENZO","PARQUE DE SANTA MARIA","HORTALEZA","MANOTERAS","PINAR DE CHAMARTIN"],[54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,264,265,266],[null,814.147899981132,389.764444498609,446.976218515561,369.364,497.659,362.51,488.21,558.569,559.484,512.458,785.926,854.0359999999999,636.081,756.004,832.943,1279.047,638.119,475.162328033171,688.716995836895,777.265731323808,933.0000075716169,505.839937485183],[null,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42,22.42],[null,2.178807939289381,1.043080582957919,1.196189701647353,0.9884852809991079,1.331826048171276,0.97014272970562,1.306538804638715,1.494832292595896,1.497280999107939,1.37143086529884,2.10328099910794,2.285555753791258,1.702268510258698,2.023204281891169,2.229107047279215,3.422962533452275,1.707722569134701,1.271620860035248,1.843132013836472,2.080104544131511,2.496877807952588,1.353719725651694]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<div id="htmlwidget-d9342cb887318e4fa7ea" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-d9342cb887318e4fa7ea">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],["ALAMEDA DE OSUNA","EL CAPRICHO","CANILLEJAS","TORRE ARIAS","SUANZES","CIUDAD LINEAL","PUEBLO NUEVO","QUINTANA","EL CARMEN","VENTAS","DIEGO DE LEON","NUÑEZ DE BALBOA","RUBEN DARIO","ALONSO MARTINEZ","CHUECA","GRAN VIA","CALLAO","OPERA","LA LATINA","PUERTA DE TOLEDO","ACACIAS","PIRAMIDES","MARQUES DE VADILLO","URGEL","OPORTO","VISTA ALEGRE","CARABANCHEL","EUGENIA DE MONTIJO","ALUCHE","EMPALME","CAMPAMENTO","CASA DE CAMPO"],[252,253,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103],[null,736.7145,1419.7351,985.045,785.008,943.039,539.239,530.192,713.966,697.9299999999999,874.875,669.974,667.1609999999999,700.5839999999999,712.497,469.881,342.86,496.399,754.561,597.455,888.667,552.653,758.424,764.61,658.234,731.653,623.79,589.297,933.505,675.7910000000001,445.038,1222.688],[null,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38,23.38],[null,1.890627459366981,3.643460479041916,2.527917023096664,2.014562874251497,2.420117194183062,1.383846877673225,1.360629597946963,1.832248075278015,1.79109495295124,2.245188195038494,1.719351582549187,1.712132591958939,1.797905902480753,1.828478186484174,1.20585372112917,0.8798802395209582,1.273906757912746,1.936426860564585,1.533246364414029,2.28058254918734,1.418271171941831,1.946340461933276,1.962215568862276,1.689223267750214,1.877638152266895,1.600829769033362,1.512310521813516,2.395650128314799,1.734279726261762,1.142099230111206,3.137779298545766]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-10-tab">
<div id="htmlwidget-5a49161d99b2afd02c93" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-5a49161d99b2afd02c93">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29],["LAGUNA","CARPETANA","OPORTO","OPAÑEL","PLAZA ELIPTICA","USERA","LEGAZPI","ARGANZUELA-PLANETARIO","MENDEZ ALVARO","PACIFICO","CONDE DE CASAL","SAINZ DE BARANDA","O'DONNELL","MANUEL BECERRA","DIEGO DE LEON","AVENIDA DE AMERICA","REPUBLICA ARGENTINA","NUEVOS MINISTERIOS","CUATRO CAMINOS","GUZMAN EL BUENO","VICENTE ALEIXANDRE","CIUDAD UNIVERSITARIA","MONCLOA","ARGÜELLES","PRINCIPE PIO","PUERTA DEL ANGEL","ALTO DE EXTREMADURA","LUCERO","LAGUNA"],[104,105,106,107,108,109,110,259,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,104],[null,688.044,894.247,765.092,687.474,958.909,989.922,547.451,900.391,860.972,734.787,829.986,759.713,615.636,737.324,698.133,879.521,952.678,760.84,744.4349999999999,637.731,684.284,1310.347,553.1609999999999,1354.014,1140.39,1032.064,937.2190000000001,783.114],[null,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65,25.65],[null,1.609459649122807,2.091805847953216,1.789688888888889,1.608126315789474,2.243061988304093,2.31560701754386,1.280587134502924,2.106177777777777,2.013969590643275,1.7188,1.941487719298245,1.777106432748538,1.440084210526316,1.724734502923976,1.633059649122807,2.057359064327485,2.228486549707602,1.77974269005848,1.741368421052631,1.491768421052632,1.60066432748538,3.06513918128655,1.293943859649123,3.167284210526315,2.667578947368421,2.414184795321638,2.192325146198831,1.831845614035088]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-11-tab">
<div id="htmlwidget-48217a222f4c46fc29f6" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-48217a222f4c46fc29f6">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],["ESTADIO METROPOLITANO","LAS MUSAS","SAN BLAS","SIMANCAS","GARCIA NOBLEJAS","ASCAO","PUEBLO NUEVO","BARRIO DE LA CONCEPCION","PARQUE DE LAS AVENIDAS","CARTAGENA","AVENIDA DE AMERICA","GREGORIO MARAÑON","ALONSO CANO","CANAL","ISLAS FILIPINAS","GUZMAN EL BUENO","FRANCOS RODRIGUEZ","VALDEZARZA","ANTONIO MACHADO","PEÑAGRANDE","AVENIDA DE LA ILUSTRACION","LACOMA","ARROYOFRESNO","PITIS"],[286,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154],[null,1053.3618,869.567,843.958,809.035,788.088,706.009,976.707,925.965,720.828,718.249,1100.617,624.335,479.786,750.736,1468.397,1124.824,1201.128,886.558,655.011,549.275,679.682,705.1202,570.9749],[null,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77,27.77],[null,2.275898739647101,1.878790781418797,1.823459848757652,1.748005041411595,1.702746849117753,1.525406553835074,2.110277997839395,2.000644580482535,1.557424558876485,1.551852358660425,2.377998559596687,1.348941303564998,1.036628015844436,1.622043932301044,3.172625855239467,2.430300324090745,2.595163125675189,1.915501620453727,1.41522002160605,1.186766294562478,1.468524306805906,1.523486208138279,1.233651206337775]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-12-tab">
<div id="htmlwidget-d84a71583363f82c5b80" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-d84a71583363f82c5b80">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8],["HOSPITAL DEL HENARES","HENARES","JARAMA","SAN FERNANDO","LA RAMBLA","COSLADA CENTRAL","BARRIO DEL PUERTO","ESTADIO METROPOLITANO"],[296,292,291,290,289,288,287,286],[null,686.9297,921.2163,1073.1361,1110.1125,1343.4833,691.7971,2964.9735],[null,33.38,33.38,33.38,33.38,33.38,33.38,33.38],[null,1.234744817255842,1.655871120431396,1.928944457759137,1.995408927501498,2.414889095266627,1.243493888556022,5.329491012582385]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-13" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-13-tab">
<div id="htmlwidget-3e2496b40a17ab62c7f1" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-3e2496b40a17ab62c7f1">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8],["NUEVOS MINISTERIOS","COLOMBIA","PINAR DEL REY","MAR DE CRISTAL","FERIA DE MADRID","AEROPUERTO T1-T2-T3","BARAJAS","AEROPUERTO T-4"],[155,156,258,157,158,159,160,285],[null,2216.288,2871.017,912.9450000000001,2214.535,4057.627,1430.526,2090.505],[null,43.29,43.29,43.29,43.29,43.29,43.29,43.29],[null,3.07177823977824,3.979233541233541,1.265343035343035,3.069348579348579,5.623876645876646,1.982711018711019,2.897442827442827]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-14" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-14-tab">
<div id="htmlwidget-6f3b674cff9e8accc8dc" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-6f3b674cff9e8accc8dc">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],["PACO DE LUCIA","MIRASIERRA","HERRERA ORIA","BARRIO DEL PILAR","VENTILLA","PLAZA DE CASTILLA","DUQUE DE PASTRANA","PIO XII","COLOMBIA","CONCHA ESPINA","CRUZ DEL RAYO","AVENIDA DE AMERICA","NUÑEZ DE BALBOA","PRINCIPE DE VERGARA","IBIZA","SAINZ DE BARANDA","ESTRELLA","VINATEROS","ARTILLEROS","PAVONES","VALDEBERNARDO","VICALVARO","SAN CIPRIANO","PUERTA DE ARGANDA"],[345,326,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182],[null,1450.0727,1213.2967,966.563,1027.091,874.877,617.12,753.186,704.36,724.578,718.335,709.73,728.078,825.731,718.542,951.6609999999999,840.255,905.122,853.276,938.025,1412.685,1384.662,512.0309999999999,652.745],[null,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81,26.81],[null,3.245220514733308,2.7153227154047,2.163139873181649,2.298599776202909,1.957949272659455,1.381096605744125,1.685608355091384,1.576337187616561,1.621584483401716,1.607612831033197,1.588355091383812,1.629417381574039,1.847961954494592,1.608076091010817,2.129789630734801,1.880466243938829,2.025636702722865,1.909606863110779,2.099272659455427,3.161547929876912,3.098833271167475,1.145910481163745,1.460824319283849]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-15" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-15-tab">
<div id="htmlwidget-b25297a774b3c53c40bd" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-b25297a774b3c53c40bd">{"x":{"filter":"none","vertical":false,"data":[[1,2,3,4,5,6],["PUERTA DE ARGANDA","RIVAS URBANIZACIONES","RIVAS FUTURA","RIVAS VACIAMADRID","LA POVEDA","ARGANDA DEL REY"],[182,183,300,184,185,186],[null,5749.903,3614.712,1521.842,4371.06,3707.895],[null,54.34,54.34,54.34,54.34,54.34],[null,6.348807140228193,3.991216783216784,1.680355539197645,4.826345233713655,4.094105631210894]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-1-16" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-16-tab">
<div id="htmlwidget-c0e4cd2d0453370b6545" class="datatables html-widget html-fill-item" style="width:100%;height:auto;">

</div>
<script type="application/json" data-for="htmlwidget-c0e4cd2d0453370b6545">{"x":{"filter":"none","vertical":false,"data":[[1,2],["OPERA","PRINCIPE PIO"],[237,238],[null,994.453],[null,19.001],[null,3.1402126203884]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>NUMEROORDEN<\/th>\n      <th>DENOMINACION<\/th>\n      <th>CODIGOESTACION<\/th>\n      <th>LONGITUDTRAMOANTERIOR<\/th>\n      <th>VELOCIDADTRAMOANTERIOR<\/th>\n      <th>TIEMPOTRAMOANTERIOR<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"scrollX":true,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[0,2,3,4,5]},{"name":"NUMEROORDEN","targets":0},{"name":"DENOMINACION","targets":1},{"name":"CODIGOESTACION","targets":2},{"name":"LONGITUDTRAMOANTERIOR","targets":3},{"name":"VELOCIDADTRAMOANTERIOR","targets":4},{"name":"TIEMPOTRAMOANTERIOR","targets":5}],"order":[],"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
</section>
</section>
<section id="construcción-del-grafo" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Construcción del grafo</h1>
<p>Con los datos estructurados ya podemos crear el grafo</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>grafo <span class="ot">&lt;-</span> <span class="fu">make_empty_graph</span>(<span class="at">directed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos los vértices</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>grafo <span class="ot">&lt;-</span> <span class="fu">add_vertices</span>(grafo, <span class="at">n =</span> <span class="fu">nrow</span>(Estaciones), </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>                      <span class="at">name =</span> Estaciones<span class="sc">$</span>Nodos,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>                      <span class="at">label =</span> Estaciones<span class="sc">$</span>Nombre, </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>                      <span class="at">linea =</span> <span class="fu">I</span>(Estaciones<span class="sc">$</span>Linea))</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Añadimos línea a línea las aristas</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (num_linea <span class="cf">in</span> <span class="fu">names</span>(lineas)) {</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  linea <span class="ot">&lt;-</span> lineas[[num_linea]]</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Procesando línea"</span>, num_linea, <span class="st">"con"</span>, <span class="fu">nrow</span>(linea), <span class="st">"estaciones</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">nrow</span>(linea) <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    origen <span class="ot">&lt;-</span> linea<span class="sc">$</span>CODIGOESTACION[i]</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    destino <span class="ot">&lt;-</span> linea<span class="sc">$</span>CODIGOESTACION[i <span class="sc">+</span> <span class="dv">1</span>]</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    peso <span class="ot">&lt;-</span> linea<span class="sc">$</span>TIEMPOTRAMOANTERIOR[i <span class="sc">+</span> <span class="dv">1</span>]</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    grafo <span class="ot">&lt;-</span> <span class="fu">add_edges</span>(grafo, <span class="fu">as.character</span>(<span class="fu">c</span>(origen, destino)), </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                       <span class="at">weight =</span> peso, </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                       <span class="at">tipo =</span> <span class="st">"trayecto"</span>, </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                       <span class="at">linea =</span> num_linea, </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> colores[num_linea])</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Procesando línea 1 con 33 estaciones
Procesando línea 10a con 21 estaciones
Procesando línea 10b con 11 estaciones
Procesando línea 11 con 7 estaciones
Procesando línea 12-1 con 29 estaciones
Procesando línea 2 con 20 estaciones
Procesando línea 3 con 19 estaciones
Procesando línea 4 con 23 estaciones
Procesando línea 5 con 32 estaciones
Procesando línea 6-1 con 29 estaciones
Procesando línea 7a con 24 estaciones
Procesando línea 7b con 8 estaciones
Procesando línea 8 con 8 estaciones
Procesando línea 9A con 24 estaciones
Procesando línea 9B con 6 estaciones
Procesando línea R con 2 estaciones</code></pre>
</div>
</div>
<p>Con esto tenemos un grafo donde cada componenete conexa es una linea (ya que las estaciones estaban repetidas por cada línea). Podemos representar cada linea por separado,</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>comp <span class="ot">&lt;-</span> <span class="fu">components</span>(grafo)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Número de componentes:"</span>, comp<span class="sc">$</span>no, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Número de componentes: 13 </code></pre>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">10</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">12</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">9</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false" href="">7</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false" href="">3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-6" role="tab" aria-controls="tabset-2-6" aria-selected="false" href="">11</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-7" role="tab" aria-controls="tabset-2-7" aria-selected="false" href="">1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-8" role="tab" aria-controls="tabset-2-8" aria-selected="false" href="">5</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-9" role="tab" aria-controls="tabset-2-9" aria-selected="false" href="">4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-10" role="tab" aria-controls="tabset-2-10" aria-selected="false" href="">2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-11" role="tab" aria-controls="tabset-2-11" aria-selected="false" href="">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-12" role="tab" aria-controls="tabset-2-12" aria-selected="false" href="">6</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-13-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-13" role="tab" aria-controls="tabset-2-13" aria-selected="false" href="">8</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div id="htmlwidget-f99826f45d910a7d56a9" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-f99826f45d910a7d56a9">{"x":{"links":{"source":[16,17,18,19,19,12,12,13,14,6,6,7,8,9,10,4,4,11,22,16,23,24,25,0,0,1,2,3,28,29],"target":[17,18,21,21,20,20,13,14,15,15,7,8,9,10,11,22,5,27,27,23,24,25,26,26,1,2,3,28,29,30],"colour":["#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7"]},"nodes":{"name":["LA GRANJA","LA MORALEJA","MARQUES DE LA VALDAVIA","MANUEL DE FALLA","JOAQUIN VILUMBRALES","PUERTA DEL SUR","PLAZA DE ESPAÑA","PRINCIPE PIO","LAGO","BATAN","CASA DE CAMPO","COLONIA JARDIN","NUEVOS MINISTERIOS","GREGORIO MARAÑON","ALONSO MARTINEZ","TRIBUNAL","FUENCARRAL","BEGOÑA","CHAMARTIN","CUZCO","SANTIAGO BERNABEU","PLAZA DE CASTILLA","CUATRO VIENTOS","TRES OLIVOS","MONTECARMELO","LAS TABLAS","RONDA DE LA COMUNICACION","AVIACION ESPAÑOLA","BAUNATAL","REYES CATOLICOS","HOSPITAL INFANTA SOFIA"],"group":["10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10","10"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"10\"])\n      .range([\"#0A6EB7\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div id="htmlwidget-983d41a75902a2f20887" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-983d41a75902a2f20887">{"x":{"links":{"source":[0,1,2,3,25,26,23,4,23,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,0,21],"target":[1,2,3,25,26,27,27,24,24,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,22],"colour":["#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D"]},"nodes":{"name":["PUERTA DEL SUR","PARQUE LISBOA","ALCORCON CENTRAL","PARQUE OESTE","LORANCA","HOSPITAL DE FUENLABRADA","PARQUE EUROPA","FUENLABRADA CENTRAL","PARQUE DE LOS ESTADOS","ARROYO CULEBRO","CONSERVATORIO","ALONSO DE MENDOZA","GETAFE CENTRAL","JUAN DE LA CIERVA","EL CASAR","LOS ESPARTALES","EL BERCIAL","EL CARRASCAL","JULIAN BESTEIRO","CASA DEL RELOJ","HOSPITAL SEVERO OCHOA","LEGANES CENTRAL","SAN NICASIO","HOSPITAL DE MOSTOLES","MANUELA MALASAÑA","UNIVERSIDAD REY JUAN CARLOS","MOSTOLES CENTRAL","PRADILLO"],"group":["12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"12\"])\n      .range([\"#AEA51D\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div id="htmlwidget-2b851761c47fd6ffcaee" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-2b851761c47fd6ffcaee">{"x":{"links":{"source":[2,2,3,4,5,6,7,8,9,10,11,11,12,13,14,15,16,17,18,19,20,21,1,0,26,27,22,24],"target":[22,3,4,5,6,7,8,9,10,23,23,12,13,14,15,16,17,18,19,20,21,26,27,1,28,28,24,25],"colour":["#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C"]},"nodes":{"name":["ARGANDA DEL REY","LA POVEDA","BARRIO DEL PILAR","VENTILLA","PLAZA DE CASTILLA","DUQUE DE PASTRANA","PIO XII","COLOMBIA","CONCHA ESPINA","CRUZ DEL RAYO","AVENIDA DE AMERICA","PRINCIPE DE VERGARA","IBIZA","SAINZ DE BARANDA","ESTRELLA","VINATEROS","ARTILLEROS","PAVONES","VALDEBERNARDO","VICALVARO","SAN CIPRIANO","PUERTA DE ARGANDA","HERRERA ORIA","NUÑEZ DE BALBOA","MIRASIERRA","PACO DE LUCIA","RIVAS URBANIZACIONES","RIVAS VACIAMADRID","RIVAS FUTURA"],"group":["9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9","9"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"9\"])\n      .range([\"#932C7C\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div id="htmlwidget-fc9b43358c1491a1f607" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-fc9b43358c1491a1f607">{"x":{"links":{"source":[12,13,14,15,15,16,17,17,18,19,21,20,4,4,5,7,6,7,8,9,9,10,12,0,0,1,2,28,29,3],"target":[13,14,22,22,16,23,23,18,19,24,24,21,20,5,6,26,26,8,25,25,10,11,27,27,1,2,28,29,30,30],"colour":["#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A"]},"nodes":{"name":["BARRIO DEL PUERTO","COSLADA CENTRAL","LA RAMBLA","HOSPITAL DEL HENARES","ISLAS FILIPINAS","GUZMAN EL BUENO","FRANCOS RODRIGUEZ","ANTONIO MACHADO","PEÑAGRANDE","LACOMA","ARROYOFRESNO","PITIS","LAS MUSAS","SAN BLAS","SIMANCAS","ASCAO","PUEBLO NUEVO","PARQUE DE LAS AVENIDAS","CARTAGENA","AVENIDA DE AMERICA","CANAL","ALONSO CANO","GARCIA NOBLEJAS","BARRIO DE LA CONCEPCION","GREGORIO MARAÑON","AVENIDA DE LA ILUSTRACION","VALDEZARZA","ESTADIO METROPOLITANO","SAN FERNANDO","JARAMA","HENARES"],"group":["7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7","7"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"7\"])\n      .range([\"#F6910A\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<div id="htmlwidget-053099561b0b2e6f4233" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-053099561b0b2e6f4233">{"x":{"links":{"source":[1,1,2,3,4,4,5,6,6,8,7,12,13,14,15,16,17,0],"target":[7,2,3,9,9,5,10,10,11,11,12,13,14,15,16,17,18,18],"colour":["#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B"]},"nodes":{"name":["EL CASAR","DELICIAS","PALOS DE LA FRONTERA","EMBAJADORES","SOL","CALLAO","VENTURA RODRIGUEZ","LEGAZPI","MONCLOA","LAVAPIES","PLAZA DE ESPAÑA","ARGÜELLES","ALMENDRALES","HOSPITAL 12 DE OCTUBRE","SAN FERMIN-ORCASUR","CIUDAD DE LOS ANGELES","VILLAVERDE BAJO CRUCE","SAN CRISTOBAL","VILLAVERDE ALTO"],"group":["3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"3\"])\n      .range([\"#FACB4B\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-6-tab">
<div id="htmlwidget-24f7fe42995fe100dbd6" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-24f7fe42995fe100dbd6">{"x":{"links":{"source":[1,2,3,4,5,0],"target":[2,3,4,5,6,6],"colour":["#135C2B","#135C2B","#135C2B","#135C2B","#135C2B","#135C2B"]},"nodes":{"name":["LA FORTUNA","PLAZA ELIPTICA","ABRANTES","PAN BENDITO","SAN FRANCISCO","CARABANCHEL ALTO","LA PESETA"],"group":["11","11","11","11","11","11","11"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"11\"])\n      .range([\"#135C2B\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-7-tab">
<div id="htmlwidget-b6d41cc9db55d646226f" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-b6d41cc9db55d646226f">{"x":{"links":{"source":[5,6,7,7,8,8,9,10,10,11,12,13,14,15,16,17,18,19,20,21,3,4,3,0,0,1,5,28,28,2,31,27],"target":[6,23,23,24,24,9,25,25,11,12,13,14,15,16,17,18,19,20,21,26,26,22,22,4,1,2,30,30,29,31,32,32],"colour":["#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2"]},"nodes":{"name":["SIERRA DE GUADALUPE","VILLA DE VALLECAS","CONGOSTO","BUENOS AIRES","MIGUEL HERNANDEZ","PLAZA DE CASTILLA","VALDEACEDERAS","ESTRECHO","CUATRO CAMINOS","RIOS ROSAS","BILBAO","TRIBUNAL","GRAN VIA","SOL","TIRSO DE MOLINA","ANTON MARTIN","ESTACION DEL ARTE","ATOCHA","MENENDEZ PELAYO","PACIFICO","PUENTE DE VALLECAS","NUEVA NUMANCIA","ALTO DEL ARENAL","TETUAN","ALVARADO","IGLESIA","PORTAZGO","VALDECARROS","BAMBU","PINAR DE CHAMARTIN","CHAMARTIN","LA GAVIA","LAS SUERTES"],"group":["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"1\"])\n      .range([\"#38A8E2\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-8-tab">
<div id="htmlwidget-11339662a6373d8021a3" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-11339662a6373d8021a3">{"x":{"links":{"source":[0,1,2,3,4,5,6,7,8,8,9,10,11,13,12,13,14,15,14,15,16,17,18,19,20,21,24,27,28,0,30],"target":[1,2,3,4,5,6,7,22,22,9,10,11,12,23,23,25,25,26,26,16,17,18,19,20,21,24,27,28,29,31,31],"colour":["#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F"]},"nodes":{"name":["CANILLEJAS","TORRE ARIAS","SUANZES","CIUDAD LINEAL","PUEBLO NUEVO","QUINTANA","EL CARMEN","VENTAS","NUÑEZ DE BALBOA","RUBEN DARIO","ALONSO MARTINEZ","CHUECA","GRAN VIA","OPERA","PUERTA DE TOLEDO","PIRAMIDES","MARQUES DE VADILLO","URGEL","OPORTO","VISTA ALEGRE","CARABANCHEL","EUGENIA DE MONTIJO","DIEGO DE LEON","CALLAO","ALUCHE","LA LATINA","ACACIAS","EMPALME","CAMPAMENTO","CASA DE CAMPO","ALAMEDA DE OSUNA","EL CAPRICHO"],"group":["5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"5\"])\n      .range([\"#80B91F\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-9-tab">
<div id="htmlwidget-e286b89059d686164967" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-e286b89059d686164967">{"x":{"links":{"source":[0,1,1,2,3,3,4,4,6,7,8,9,10,11,11,12,13,14,15,16,20,21],"target":[17,17,2,18,18,5,5,6,7,8,9,10,19,19,12,13,14,15,16,20,21,22],"colour":["#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645"]},"nodes":{"name":["ARGÜELLES","BILBAO","ALONSO MARTINEZ","SERRANO","GOYA","VELAZQUEZ","LISTA","DIEGO DE LEON","AVENIDA DE AMERICA","PROSPERIDAD","ALFONSO XIII","ARTURO SORIA","ESPERANZA","CANILLAS","MAR DE CRISTAL","SAN LORENZO","PARQUE DE SANTA MARIA","SAN BERNARDO","COLON","AVENIDA DE LA PAZ","HORTALEZA","MANOTERAS","PINAR DE CHAMARTIN"],"group":["4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"4\"])\n      .range([\"#A46645\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-10-tab">
<div id="htmlwidget-1180937779268274fc52" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-1180937779268274fc52">{"x":{"links":{"source":[4,5,6,6,7,13,8,0,0,1,1,2,3,3,4,15,16,17,18],"target":[5,12,12,7,13,14,14,8,9,9,2,10,10,11,15,16,17,18,19],"colour":["#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15"]},"nodes":{"name":["OPERA","NOVICIADO","SAN BERNARDO","CANAL","VENTAS","MANUEL BECERRA","PRINCIPE DE VERGARA","RETIRO","SOL","SANTO DOMINGO","QUEVEDO","CUATRO CAMINOS","GOYA","BANCO DE ESPAÑA","SEVILLA","LA ELIPA","LA ALMUDENA","ALSACIA","AVENIDA DE GUADALAJARA","LAS ROSAS"],"group":["2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"2\"])\n      .range([\"#DB0B15\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-11-tab">
<div id="htmlwidget-bc0d54b9d56ca82fcd3b" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-bc0d54b9d56ca82fcd3b">{"x":{"links":{"source":[0],"target":[1],"colour":["#156CB2"]},"nodes":{"name":["PRINCIPE PIO","OPERA"],"group":["R","R"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"R\"])\n      .range([\"#156CB2\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-12-tab">
<div id="htmlwidget-5c5d41f07176295c709f" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-5c5d41f07176295c709f">{"x":{"links":{"source":[8,9,10,11,11,12,13,14,15,16,17,17,18,19,20,21,1,0,0,2,3,3,4,5,6,7,13,14],"target":[9,10,25,25,12,26,26,15,16,23,23,18,19,20,21,22,22,1,2,24,24,4,5,6,7,8,27,27],"colour":["#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99"]},"nodes":{"name":["GUZMAN EL BUENO","CUATRO CAMINOS","VICENTE ALEIXANDRE","MONCLOA","ARGÜELLES","PRINCIPE PIO","PUERTA DEL ANGEL","ALTO DE EXTREMADURA","LUCERO","LAGUNA","CARPETANA","OPAÑEL","PLAZA ELIPTICA","LEGAZPI","MENDEZ ALVARO","PACIFICO","CONDE DE CASAL","O'DONNELL","MANUEL BECERRA","DIEGO DE LEON","AVENIDA DE AMERICA","REPUBLICA ARGENTINA","NUEVOS MINISTERIOS","SAINZ DE BARANDA","CIUDAD UNIVERSITARIA","OPORTO","USERA","ARGANZUELA-PLANETARIO"],"group":["6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6","6"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"6\"])\n      .range([\"#A29C99\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-2-13" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-13-tab">
<div id="htmlwidget-4b7131538ca3e176156c" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-4b7131538ca3e176156c">{"x":{"links":{"source":[4,0,0,1,4,3,2],"target":[5,3,1,2,6,6,7],"colour":["#E96198","#E96198","#E96198","#E96198","#E96198","#E96198","#E96198"]},"nodes":{"name":["FERIA DE MADRID","AEROPUERTO T1-T2-T3","BARAJAS","MAR DE CRISTAL","COLOMBIA","NUEVOS MINISTERIOS","PINAR DEL REY","AEROPUERTO T-4"],"group":["8","8","8","8","8","8","8","8"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"8\"])\n      .range([\"#E96198\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<section id="transbordos" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="transbordos"><span class="header-section-number">2.1</span> Transbordos</h2>
<p>Para los transbordos uniremos las paradas con el mismo nombre con una arista especial de tipo <code>transbordo</code>. El peso que le asignemos dependerá de cuanto queramos penalizar los transbordos. Si queremos minimizar el número de transbordos les pondremos un peso muy alto mientras que si no es relevante pondremos un peso menor. Para nuestro ejemplo vamos a suponer que todos los transbordos tienen una duración de 5 minutos.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (nombre <span class="cf">in</span> <span class="fu">unique</span>(Estaciones<span class="sc">$</span>Nombre)) {</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  nodos_mismo_nombre <span class="ot">&lt;-</span> <span class="fu">V</span>(grafo)[<span class="fu">V</span>(grafo)<span class="sc">$</span>label <span class="sc">==</span> nombre]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">length</span>(nodos_mismo_nombre) <span class="sc">&gt;</span> <span class="dv">1</span>) {</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>(<span class="fu">length</span>(nodos_mismo_nombre) <span class="sc">-</span> <span class="dv">1</span>)) {</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (j <span class="cf">in</span> (i <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">:</span><span class="fu">length</span>(nodos_mismo_nombre)) {</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>        grafo <span class="ot">&lt;-</span> <span class="fu">add_edges</span>(grafo, </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>                           <span class="fu">c</span>(<span class="fu">as.character</span>(nodos_mismo_nombre[i]<span class="sc">$</span>name), </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">as.character</span>(nodos_mismo_nombre[j]<span class="sc">$</span>name)), </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>                           <span class="at">weight =</span> <span class="dv">5</span>, </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>                           <span class="at">tipo =</span> <span class="st">"transbordo"</span>, </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>                           <span class="at">color =</span> <span class="st">"black"</span>)</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="análisis-del-grafo" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Análisis del grafo</h1>
<section id="camino-mínimo-entre-estaciones" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="camino-mínimo-entre-estaciones"><span class="header-section-number">3.1</span> Camino mínimo entre estaciones</h2>
<p>Por ejemplo podemos calcular la ruta óptima entre dos paradas y obtener un tiempo estimado</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>ruta <span class="ot">&lt;-</span> <span class="fu">shortest_paths</span>(</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  grafo, </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">from =</span> <span class="fu">as.character</span>(<span class="st">"305"</span>), <span class="co">#La Fortuna </span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">as.character</span>(<span class="st">"46"</span>),    <span class="co">#Embajadores</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> <span class="fu">E</span>(grafo)<span class="sc">$</span>weight,</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="st">"both"</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>distancia <span class="ot">&lt;-</span> <span class="fu">distances</span>(</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    grafo, </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.character</span>(<span class="st">"305"</span>),        <span class="co">#La Fortuna </span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">to =</span> <span class="fu">as.character</span>(<span class="st">"46"</span>),    <span class="co">#Embajadores</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">weights =</span> <span class="fu">E</span>(grafo)<span class="sc">$</span>weight,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Ver los nombres de las estaciones del camino</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>nombres_ruta <span class="ot">&lt;-</span> <span class="fu">V</span>(grafo)[ruta<span class="sc">$</span>vpath[[<span class="dv">1</span>]]]<span class="sc">$</span>label</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>subgrafo <span class="ot">&lt;-</span> <span class="fu">induced_subgraph</span>(grafo, ruta<span class="sc">$</span>vpath[[<span class="dv">1</span>]])</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="fu">representar_grafo</span>(subgrafo)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="forceNetwork html-widget html-fill-item" id="htmlwidget-6b0ffd517c6184656389" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6b0ffd517c6184656389">{"x":{"links":{"source":[1,1,2,5,8,9,4,5,6,7,11,12,0],"target":[4,2,3,8,10,10,9,6,7,11,12,13,13],"colour":["#FACB4B","#FACB4B","#FACB4B","black","#A29C99","#A29C99","black","#135C2B","#135C2B","#135C2B","#135C2B","#135C2B","#135C2B"]},"nodes":{"name":["LA FORTUNA","DELICIAS","PALOS DE LA FRONTERA","EMBAJADORES","LEGAZPI","PLAZA ELIPTICA","ABRANTES","PAN BENDITO","PLAZA ELIPTICA","LEGAZPI","USERA","SAN FRANCISCO","CARABANCHEL ALTO","LA PESETA"],"group":["11","3","3","3","3","11","11","11","6","6","6","11","11","11"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"11\", \"3\", \"6\"])\n      .range([\"#135C2B\", \"#FACB4B\", \"#A29C99\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>La ruta más rapida entre las dos estaciones es: LA FORTUNA, LA PESETA, CARABANCHEL ALTO, SAN FRANCISCO, PAN BENDITO, ABRANTES, PLAZA ELIPTICA, USERA, LEGAZPI, DELICIAS, PALOS DE LA FRONTERA, EMBAJADORES con 2 transbordos y un tiempo de 34.7979073 minutos.</p>
</section>
<section id="diámetro-de-la-red" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="diámetro-de-la-red"><span class="header-section-number">3.2</span> Diámetro de la red</h2>
<p>También podemos calcular el <strong>diametro del grafo</strong>, es decir, las dos paradas mas alejadas de la red.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>tiempo_maximo <span class="ot">&lt;-</span> <span class="fu">diameter</span>(grafo, <span class="at">directed =</span> <span class="cn">FALSE</span>, <span class="at">weights =</span> <span class="fu">E</span>(grafo)<span class="sc">$</span>weight)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>nodos_diametro <span class="ot">&lt;-</span> <span class="fu">get_diameter</span>(grafo, <span class="at">directed =</span> <span class="cn">FALSE</span>, <span class="at">weights =</span> <span class="fu">E</span>(grafo)<span class="sc">$</span>weight)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>nombres_diametro <span class="ot">&lt;-</span> nodos_diametro<span class="sc">$</span>label</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>subgrafo <span class="ot">&lt;-</span> <span class="fu">induced_subgraph</span>(grafo, nodos_diametro)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">representar_grafo</span>(subgrafo)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="forceNetwork html-widget html-fill-item" id="htmlwidget-13f9e07c13373bd31193" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-13f9e07c13373bd31193">{"x":{"links":{"source":[14,25,26,27,15,15,16,17,18,19,20,21,22,23,1,0,2,3,4,5,6,7,8,9,10,11,24,25,14,29,30,31,32,33,34,13,37,38,12],"target":[24,26,27,28,28,16,17,18,19,20,21,22,23,37,38,1,3,4,5,6,7,8,9,10,11,12,36,36,29,30,31,32,33,34,35,35,39,39,13],"colour":["black","#A29C99","#A29C99","#A29C99","black","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#A29C99","#A29C99","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#932C7C","#932C7C","black"]},"nodes":{"name":["ARGANDA DEL REY","LA POVEDA","LORANCA","HOSPITAL DE FUENLABRADA","PARQUE EUROPA","FUENLABRADA CENTRAL","PARQUE DE LOS ESTADOS","ARROYO CULEBRO","CONSERVATORIO","ALONSO DE MENDOZA","GETAFE CENTRAL","JUAN DE LA CIERVA","EL CASAR","EL CASAR","LEGAZPI","SAINZ DE BARANDA","ESTRELLA","VINATEROS","ARTILLEROS","PAVONES","VALDEBERNARDO","VICALVARO","SAN CIPRIANO","PUERTA DE ARGANDA","LEGAZPI","MENDEZ ALVARO","PACIFICO","CONDE DE CASAL","SAINZ DE BARANDA","ALMENDRALES","HOSPITAL 12 DE OCTUBRE","SAN FERMIN-ORCASUR","CIUDAD DE LOS ANGELES","VILLAVERDE BAJO CRUCE","SAN CRISTOBAL","VILLAVERDE ALTO","ARGANZUELA-PLANETARIO","RIVAS URBANIZACIONES","RIVAS VACIAMADRID","RIVAS FUTURA"],"group":["9","9","12","12","12","12","12","12","12","12","12","12","12","3","3","9","9","9","9","9","9","9","9","9","6","6","6","6","6","3","3","3","3","3","3","3","6","9","9","9"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"9\", \"12\", \"3\", \"6\"])\n      .range([\"#932C7C\", \"#AEA51D\", \"#FACB4B\", \"#A29C99\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>El trayecto más largo de la red dura 108.2341603 minutos y es entre ARGANDA DEL REY y LORANCA.</p>
</section>
<section id="medidas-de-centralidad" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="medidas-de-centralidad"><span class="header-section-number">3.3</span> Medidas de centralidad</h2>
<p>Para estudiar los nodos mas importantes de nuestra red podemos aplicar diferentes medidas de centralidad. Para su implementacion seguiremos este <a href="https://webs-deim.urv.cat/~sergio.gomez/papers/Gomez-Centrality_in_networks-Finding_the_most_important_nodes.pdf">artículo</a> donde se explican las diferente metricas de centralidad y la importancia de cada una de ellas.</p>
<p>Como en este caso los transbordos no son relevantes, es necesario crear un grafo sin vértices <code>transbordo</code>, uniendo las estaciones que se llaman igual.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>grafo_sin_transbordos <span class="ot">&lt;-</span> <span class="fu">contract.vertices</span>(grafo, <span class="fu">factor</span>(<span class="fu">V</span>(grafo)<span class="sc">$</span>label),</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.attr.comb=</span> <span class="cf">function</span>(x) <span class="fu">toString</span>(<span class="fu">unique</span>(x))) </span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `contract.vertices()` was deprecated in igraph 2.0.0.
ℹ Please use `contract()` instead.</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>grafo_sin_transbordos <span class="ot">&lt;-</span> <span class="fu">delete_edges</span>(grafo_sin_transbordos , <span class="fu">E</span>(grafo_sin_transbordos)[tipo <span class="sc">==</span> <span class="st">"transbordo"</span>,])</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">representar_grafo</span>(grafo_sin_transbordos)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="forceNetwork html-widget html-fill-item" id="htmlwidget-7e55b2c049d9b640abf8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7e55b2c049d9b640abf8">{"x":{"links":{"source":[54,73,70,54,10,94,41,177,44,14,50,132,178,19,138,27,27,153,27,58,96,12,182,16,217,12,125,83,126,203,91,25,35,51,27,96,45,88,68,88,17,16,26,17,29,22,29,22,3,3,2,36,176,36,73,59,59,27,62,26,63,85,106,155,23,85,23,169,63,145,144,228,204,186,186,196,121,196,18,40,40,32,159,152,153,70,59,68,95,10,8,27,43,38,176,219,38,44,31,52,31,69,110,167,156,0,0,42,152,5,5,168,150,150,102,102,134,101,13,101,90,21,90,9,21,9,92,78,78,74,74,53,77,53,105,131,189,20,157,177,124,13,146,4,47,162,49,49,115,141,59,215,64,113,32,137,99,7,100,56,56,205,78,205,89,149,129,117,129,117,119,139,39,104,39,37,37,66,72,93,109,122,97,64,116,128,97,84,154,106,93,181,33,11,11,28,98,33,147,118,43,151,157,20,190,151,41,15,45,8,7,71,19,79,71,79,214,157,94,43,130,177,20,58,20,20,10,10,60,15,45,213,93,93,72,6,27,24,6,24,46,107,68,46,87,165,141,99,218,47,57,35,57,25,184,76,41,72,114,138,76,27,72,10,154,10,55,43,1,118,1,143,158,143,156,50,158,48,48,14],"target":[176,176,176,176,223,223,223,223,80,80,125,226,226,144,155,72,72,192,192,236,236,188,188,220,220,136,136,126,203,216,216,91,163,163,51,108,108,96,96,230,230,82,82,170,170,123,123,175,87,34,34,98,233,233,173,173,62,67,67,145,201,201,201,201,240,240,169,228,159,159,159,235,235,204,197,197,198,198,121,89,54,54,185,185,211,211,153,153,153,95,95,95,177,124,227,227,52,52,61,61,69,110,189,189,178,178,162,179,179,167,168,224,224,180,180,140,140,134,42,166,166,164,164,65,65,92,111,111,135,135,77,112,112,105,131,210,210,182,182,182,182,146,215,75,75,208,208,120,120,172,172,237,237,114,171,171,137,100,206,206,239,239,238,238,222,222,149,199,199,119,142,142,139,194,194,83,66,122,138,138,207,207,109,116,128,229,103,219,181,181,181,193,193,113,28,127,147,214,160,157,157,212,212,202,202,202,202,84,190,45,132,132,132,161,161,130,217,217,217,217,217,234,234,148,148,148,41,60,213,68,68,231,231,133,133,183,183,30,30,81,81,195,195,141,141,209,209,165,221,221,218,184,184,184,191,191,107,232,232,232,232,154,154,200,200,55,94,94,187,187,174,174,225,225,158,158,241,241,86,86],"colour":["#0A6EB7","#932C7C","#0A6EB7","#0A6EB7","#0A6EB7","#38A8E2","#38A8E2","#0A6EB7","#80B91F","#80B91F","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#38A8E2","#38A8E2","#A29C99","#A29C99","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#A29C99","#F6910A","#F6910A","#38A8E2","#38A8E2","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#E96198","#E96198","#E96198","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#38A8E2","#A29C99","#932C7C","#932C7C","#A29C99","#932C7C","#932C7C","#932C7C","#932C7C","#A29C99","#38A8E2","#A29C99","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#0A6EB7","#0A6EB7","#38A8E2","#38A8E2","#38A8E2","#0A6EB7","#0A6EB7","#E96198","#A29C99","#0A6EB7","#0A6EB7","#F6910A","#F6910A","#FACB4B","#0A6EB7","#38A8E2","#38A8E2","#0A6EB7","#80B91F","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#AEA51D","#A29C99","#135C2B","#135C2B","#38A8E2","#38A8E2","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#38A8E2","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#A29C99","#156CB2","#0A6EB7","#0A6EB7","#38A8E2","#38A8E2","#80B91F","#80B91F","#135C2B","#135C2B","#135C2B","#135C2B","#E96198","#E96198","#38A8E2","#38A8E2","#DB0B15","#38A8E2","#A46645","#A46645","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#F6910A","#F6910A","#F6910A","#A29C99","#DB0B15","#F6910A","#F6910A","#F6910A","#38A8E2","#38A8E2","#38A8E2","#F6910A","#38A8E2","#932C7C","#932C7C","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#DB0B15","#932C7C","#DB0B15","#932C7C","#80B91F","#80B91F","#DB0B15","#DB0B15","#A46645","#DB0B15","#DB0B15","#A46645","#38A8E2","#DB0B15","#F6910A","#FACB4B","#FACB4B","#A29C99","#FACB4B","#FACB4B","#FACB4B","#DB0B15","#DB0B15","#38A8E2","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#A29C99","#A29C99","#A29C99","#A46645","#A46645","#A46645","#38A8E2","#DB0B15","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#38A8E2","#38A8E2","#A46645","#E96198","#A46645","#A46645","#A46645","#80B91F","#80B91F","#80B91F","#F6910A","#80B91F","#F6910A","#80B91F","#80B91F","#38A8E2","#80B91F","#DB0B15","#DB0B15","#80B91F","#932C7C","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#A29C99","#A29C99","#80B91F","#80B91F","#80B91F","#80B91F"]},"nodes":{"name":["ABRANTES","ACACIAS","AEROPUERTO T-4","AEROPUERTO T1-T2-T3","ALAMEDA DE OSUNA","ALCORCON CENTRAL","ALFONSO XIII","ALMENDRALES","ALONSO CANO","ALONSO DE MENDOZA","ALONSO MARTINEZ","ALSACIA","ALTO DE EXTREMADURA","ALTO DEL ARENAL","ALUCHE","ALVARADO","ANTON MARTIN","ANTONIO MACHADO","ARGANDA DEL REY","ARGANZUELA-PLANETARIO","ARGÜELLES","ARROYO CULEBRO","ARROYOFRESNO","ARTILLEROS","ARTURO SORIA","ASCAO","ATOCHA","AVENIDA DE AMERICA","AVENIDA DE GUADALAJARA","AVENIDA DE LA ILUSTRACION","AVENIDA DE LA PAZ","AVIACION ESPAÑOLA","BAMBU","BANCO DE ESPAÑA","BARAJAS","BARRIO DE LA CONCEPCION","BARRIO DEL PILAR","BARRIO DEL PUERTO","BATAN","BAUNATAL","BEGOÑA","BILBAO","BUENOS AIRES","CALLAO","CAMPAMENTO","CANAL","CANILLAS","CANILLEJAS","CARABANCHEL","CARABANCHEL ALTO","CARPETANA","CARTAGENA","CASA DE CAMPO","CASA DEL RELOJ","CHAMARTIN","CHUECA","CIUDAD DE LOS ANGELES","CIUDAD LINEAL","CIUDAD UNIVERSITARIA","COLOMBIA","COLON","COLONIA JARDIN","CONCHA ESPINA","CONDE DE CASAL","CONGOSTO","CONSERVATORIO","COSLADA CENTRAL","CRUZ DEL RAYO","CUATRO CAMINOS","CUATRO VIENTOS","CUZCO","DELICIAS","DIEGO DE LEON","DUQUE DE PASTRANA","EL BERCIAL","EL CAPRICHO","EL CARMEN","EL CARRASCAL","EL CASAR","EMBAJADORES","EMPALME","ESPERANZA","ESTACION DEL ARTE","ESTADIO METROPOLITANO","ESTRECHO","ESTRELLA","EUGENIA DE MONTIJO","FERIA DE MADRID","FRANCOS RODRIGUEZ","FUENCARRAL","FUENLABRADA CENTRAL","GARCIA NOBLEJAS","GETAFE CENTRAL","GOYA","GRAN VIA","GREGORIO MARAÑON","GUZMAN EL BUENO","HENARES","HERRERA ORIA","HORTALEZA","HOSPITAL 12 DE OCTUBRE","HOSPITAL DE FUENLABRADA","HOSPITAL DE MOSTOLES","HOSPITAL DEL HENARES","HOSPITAL INFANTA SOFIA","HOSPITAL SEVERO OCHOA","IBIZA","IGLESIA","ISLAS FILIPINAS","JARAMA","JOAQUIN VILUMBRALES","JUAN DE LA CIERVA","JULIAN BESTEIRO","LA ALMUDENA","LA ELIPA","LA FORTUNA","LA GAVIA","LA GRANJA","LA LATINA","LA MORALEJA","LA PESETA","LA POVEDA","LA RAMBLA","LACOMA","LAGO","LAGUNA","LAS MUSAS","LAS ROSAS","LAS SUERTES","LAS TABLAS","LAVAPIES","LEGANES CENTRAL","LEGAZPI","LISTA","LORANCA","LOS ESPARTALES","LUCERO","MANOTERAS","MANUEL BECERRA","MANUEL DE FALLA","MANUELA MALASAÑA","MAR DE CRISTAL","MARQUES DE LA VALDAVIA","MARQUES DE VADILLO","MENDEZ ALVARO","MENENDEZ PELAYO","MIGUEL HERNANDEZ","MIRASIERRA","MONCLOA","MONTECARMELO","MOSTOLES CENTRAL","NOVICIADO","NUEVA NUMANCIA","NUEVOS MINISTERIOS","NUÑEZ DE BALBOA","O'DONNELL","OPAÑEL","OPERA","OPORTO","PACIFICO","PACO DE LUCIA","PALOS DE LA FRONTERA","PAN BENDITO","PARQUE DE LAS AVENIDAS","PARQUE DE LOS ESTADOS","PARQUE DE SANTA MARIA","PARQUE EUROPA","PARQUE LISBOA","PARQUE OESTE","PAVONES","PEÑAGRANDE","PINAR DE CHAMARTIN","PINAR DEL REY","PIO XII","PIRAMIDES","PITIS","PLAZA DE CASTILLA","PLAZA DE ESPAÑA","PLAZA ELIPTICA","PORTAZGO","PRADILLO","PRINCIPE DE VERGARA","PRINCIPE PIO","PROSPERIDAD","PUEBLO NUEVO","PUENTE DE VALLECAS","PUERTA DE ARGANDA","PUERTA DE TOLEDO","PUERTA DEL ANGEL","PUERTA DEL SUR","QUEVEDO","QUINTANA","REPUBLICA ARGENTINA","RETIRO","REYES CATOLICOS","RIOS ROSAS","RIVAS FUTURA","RIVAS URBANIZACIONES","RIVAS VACIAMADRID","RONDA DE LA COMUNICACION","RUBEN DARIO","SAINZ DE BARANDA","SAN BERNARDO","SAN BLAS","SAN CIPRIANO","SAN CRISTOBAL","SAN FERMIN-ORCASUR","SAN FERNANDO","SAN FRANCISCO","SAN LORENZO","SAN NICASIO","SANTIAGO BERNABEU","SANTO DOMINGO","SERRANO","SEVILLA","SIERRA DE GUADALUPE","SIMANCAS","SOL","SUANZES","TETUAN","TIRSO DE MOLINA","TORRE ARIAS","TRES OLIVOS","TRIBUNAL","UNIVERSIDAD REY JUAN CARLOS","URGEL","USERA","VALDEACEDERAS","VALDEBERNARDO","VALDECARROS","VALDEZARZA","VELAZQUEZ","VENTAS","VENTILLA","VENTURA RODRIGUEZ","VICALVARO","VICENTE ALEIXANDRE","VILLA DE VALLECAS","VILLAVERDE ALTO","VILLAVERDE BAJO CRUCE","VINATEROS","VISTA ALEGRE"],"group":["11","5","8","8","5","12","4","3","7","12","5, 4, 10","2","6","1","5","1","1","7","9","6","4, 6, 3","12","7","9","4","7","1","9, 7, 6, 4","2","7","4","10","1","2","8","7","9","7","10","10","10","4, 1","1","3, 5","5","2, 7","4","5","5","11","6","7","10, 5","12","10, 1","5","3","5","6","9, 8","4","10","9","6","1","12","7","9","1, 6, 2","10","10","3","6, 4, 5","9","12","5","5","12","12, 3","3","5","4","1","7","1","9","5","8","7","10","12","7","12","4, 2","5, 1","10, 7","7, 6","7","9","4","3","12","12","7","10","12","9","1","7","7","10","12","12","2","2","11","1","10","5","10","11","9","7","7","10","6","7","2","1","10","3","12","3, 6","4","12","12","6","4","2, 6","10","12","4, 8","10","5","6","1","1","9","3, 6","10","12","2","1","10, 6, 8","5, 9","6","6","2, 5, R","5, 6","1, 6","9","3","11","7","12","4","12","12","12","9","7","1, 4","8","9","5","7","1, 9, 10","10, 3","11, 6","1","12","2, 9","R, 10, 6","4","5, 7","1","9","5","6","10, 12","2","5","6","2","10","1","9","9","9","10","5","9, 6","2, 4","7","9","3","3","7","11","4","12","10","2","4","2","1","7","3, 2, 1","5","1","1","5","10","1, 10","12","5","6","1","9","1","7","4","5, 2","9","3","9","6","1","3","3","9","5"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"11\", \"5\", \"8\", \"12\", \"4\", \"3\", \"7\", \"5, 4, 10\", \"2\", \"6\", \"1\", \"9\", \"4, 6, 3\", \"9, 7, 6, 4\", \"10\", \"4, 1\", \"3, 5\", \"2, 7\", \"10, 5\", \"10, 1\", \"9, 8\", \"1, 6, 2\", \"6, 4, 5\", \"12, 3\", \"4, 2\", \"5, 1\", \"10, 7\", \"7, 6\", \"3, 6\", \"2, 6\", \"4, 8\", \"10, 6, 8\", \"5, 9\", \"2, 5, R\", \"5, 6\", \"1, 6\", \"1, 4\", \"1, 9, 10\", \"10, 3\", \"11, 6\", \"2, 9\", \"R, 10, 6\", \"5, 7\", \"10, 12\", \"9, 6\", \"2, 4\", \"3, 2, 1\", \"1, 10\", \"5, 2\"])\n      .range([\"#135C2B\", \"#80B91F\", \"#E96198\", \"#AEA51D\", \"#A46645\", \"#FACB4B\", \"#F6910A\", \"NA\", \"#DB0B15\", \"#A29C99\", \"#38A8E2\", \"#932C7C\", \"NA\", \"NA\", \"#0A6EB7\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\", \"NA\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Ahora, con la matriz de adyacencia podemos proceder a calcular las medidas de centralidad.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular las medidas de centralidad</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>c_deg <span class="ot">&lt;-</span> <span class="fu">degree</span>(grafo_sin_transbordos)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>c_clos <span class="ot">&lt;-</span> <span class="fu">closeness</span>(grafo_sin_transbordos, <span class="at">normalized =</span> <span class="cn">TRUE</span>)</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>c_betw <span class="ot">&lt;-</span> <span class="fu">betweenness</span>(grafo_sin_transbordos)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>c_eig <span class="ot">&lt;-</span> <span class="fu">eigen_centrality</span>(grafo_sin_transbordos)<span class="sc">$</span>vector</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>c_katz <span class="ot">&lt;-</span> <span class="fu">alpha_centrality</span>(grafo_sin_transbordos, <span class="at">alpha =</span> <span class="fl">0.1</span>)</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>c_pagerank <span class="ot">&lt;-</span> <span class="fu">page_rank</span>(grafo_sin_transbordos)<span class="sc">$</span>vector</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Construir el dataframe de resultados</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>resultados_centralidad <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Nodo =</span> <span class="fu">V</span>(grafo_sin_transbordos)<span class="sc">$</span>label,</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Grado =</span> c_deg,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">Cercania =</span> <span class="fu">round</span>(c_clos, <span class="dv">3</span>),</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Intermediacion =</span> <span class="fu">round</span>(c_betw, <span class="dv">3</span>),</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">Autovector =</span> <span class="fu">round</span>(<span class="fu">as.vector</span>(c_eig), <span class="dv">3</span>),</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">Katz =</span> <span class="fu">round</span>(<span class="fu">as.vector</span>(c_katz), <span class="dv">3</span>),</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">PageRank =</span> <span class="fu">round</span>(<span class="fu">as.vector</span>(c_pagerank), <span class="dv">3</span>)</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(resultados_centralidad)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-bba00f8f076c502ca5fb" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-bba00f8f076c502ca5fb">{"x":{"filter":"none","vertical":false,"data":[["207","92","285","159","252","211","66","267","143","225","85, 57, 195","323","129","23","100","5","14","149","186","259","54, 126, 52","223","153","177","68","136","16","170, 141, 118, 64","324","151","67","257","262","33","160","138","162","287","200","282","188","56, 9","22","49, 88","102","41, 144","70","74","98","255","105","140","201, 103","233","189, 261","86","270","77","124","167, 156","58","202","168","113","27","224","288","169","6, 121, 42","203","191","44","117, 63, 82","165","230","253","80","231","228, 349","46","101","69","15","286","4","175","99","158","147","187","221","135","226","61, 30","87, 11","194, 142","146, 122","292","161","264","268","219","216","296","284","234","173","8","145","291","204","227","232","322","260","305","293","278","90","279","256","185","289","152","199","104","132","325","294","276","47","235","43, 110","62","218","229","130","265","29, 116","281","217","71, 157","280","94","111","17","24","326","53, 125","275","214","38","20","193, 120, 155","83, 171","115","107","36, 89, 237","96, 106","18, 112","345","45","208","139","222","73","220","210","212","178","150","263, 266","258","166","93","154","1, 164, 190","197, 50","206, 108","21","215","31, 172","238, 198, 127","65","78, 137","19","182","91","128","205, 209","40","79","119","32","283","7","300","183","184","277","84","174, 114","39, 55","133","181","272","269","290","254","72","236","192","37","59","34","25","134","48, 35, 12","76","3","13","75","274","10, 196","213","95","109","2","179","295","148","60","81, 28","163","51","180","123","26","273","271","176","97"],["ABRANTES","ACACIAS","AEROPUERTO T-4","AEROPUERTO T1-T2-T3","ALAMEDA DE OSUNA","ALCORCON CENTRAL","ALFONSO XIII","ALMENDRALES","ALONSO CANO","ALONSO DE MENDOZA","ALONSO MARTINEZ","ALSACIA","ALTO DE EXTREMADURA","ALTO DEL ARENAL","ALUCHE","ALVARADO","ANTON MARTIN","ANTONIO MACHADO","ARGANDA DEL REY","ARGANZUELA-PLANETARIO","ARGÜELLES","ARROYO CULEBRO","ARROYOFRESNO","ARTILLEROS","ARTURO SORIA","ASCAO","ATOCHA","AVENIDA DE AMERICA","AVENIDA DE GUADALAJARA","AVENIDA DE LA ILUSTRACION","AVENIDA DE LA PAZ","AVIACION ESPAÑOLA","BAMBU","BANCO DE ESPAÑA","BARAJAS","BARRIO DE LA CONCEPCION","BARRIO DEL PILAR","BARRIO DEL PUERTO","BATAN","BAUNATAL","BEGOÑA","BILBAO","BUENOS AIRES","CALLAO","CAMPAMENTO","CANAL","CANILLAS","CANILLEJAS","CARABANCHEL","CARABANCHEL ALTO","CARPETANA","CARTAGENA","CASA DE CAMPO","CASA DEL RELOJ","CHAMARTIN","CHUECA","CIUDAD DE LOS ANGELES","CIUDAD LINEAL","CIUDAD UNIVERSITARIA","COLOMBIA","COLON","COLONIA JARDIN","CONCHA ESPINA","CONDE DE CASAL","CONGOSTO","CONSERVATORIO","COSLADA CENTRAL","CRUZ DEL RAYO","CUATRO CAMINOS","CUATRO VIENTOS","CUZCO","DELICIAS","DIEGO DE LEON","DUQUE DE PASTRANA","EL BERCIAL","EL CAPRICHO","EL CARMEN","EL CARRASCAL","EL CASAR","EMBAJADORES","EMPALME","ESPERANZA","ESTACION DEL ARTE","ESTADIO METROPOLITANO","ESTRECHO","ESTRELLA","EUGENIA DE MONTIJO","FERIA DE MADRID","FRANCOS RODRIGUEZ","FUENCARRAL","FUENLABRADA CENTRAL","GARCIA NOBLEJAS","GETAFE CENTRAL","GOYA","GRAN VIA","GREGORIO MARAÑON","GUZMAN EL BUENO","HENARES","HERRERA ORIA","HORTALEZA","HOSPITAL 12 DE OCTUBRE","HOSPITAL DE FUENLABRADA","HOSPITAL DE MOSTOLES","HOSPITAL DEL HENARES","HOSPITAL INFANTA SOFIA","HOSPITAL SEVERO OCHOA","IBIZA","IGLESIA","ISLAS FILIPINAS","JARAMA","JOAQUIN VILUMBRALES","JUAN DE LA CIERVA","JULIAN BESTEIRO","LA ALMUDENA","LA ELIPA","LA FORTUNA","LA GAVIA","LA GRANJA","LA LATINA","LA MORALEJA","LA PESETA","LA POVEDA","LA RAMBLA","LACOMA","LAGO","LAGUNA","LAS MUSAS","LAS ROSAS","LAS SUERTES","LAS TABLAS","LAVAPIES","LEGANES CENTRAL","LEGAZPI","LISTA","LORANCA","LOS ESPARTALES","LUCERO","MANOTERAS","MANUEL BECERRA","MANUEL DE FALLA","MANUELA MALASAÑA","MAR DE CRISTAL","MARQUES DE LA VALDAVIA","MARQUES DE VADILLO","MENDEZ ALVARO","MENENDEZ PELAYO","MIGUEL HERNANDEZ","MIRASIERRA","MONCLOA","MONTECARMELO","MOSTOLES CENTRAL","NOVICIADO","NUEVA NUMANCIA","NUEVOS MINISTERIOS","NUÑEZ DE BALBOA","O'DONNELL","OPAÑEL","OPERA","OPORTO","PACIFICO","PACO DE LUCIA","PALOS DE LA FRONTERA","PAN BENDITO","PARQUE DE LAS AVENIDAS","PARQUE DE LOS ESTADOS","PARQUE DE SANTA MARIA","PARQUE EUROPA","PARQUE LISBOA","PARQUE OESTE","PAVONES","PEÑAGRANDE","PINAR DE CHAMARTIN","PINAR DEL REY","PIO XII","PIRAMIDES","PITIS","PLAZA DE CASTILLA","PLAZA DE ESPAÑA","PLAZA ELIPTICA","PORTAZGO","PRADILLO","PRINCIPE DE VERGARA","PRINCIPE PIO","PROSPERIDAD","PUEBLO NUEVO","PUENTE DE VALLECAS","PUERTA DE ARGANDA","PUERTA DE TOLEDO","PUERTA DEL ANGEL","PUERTA DEL SUR","QUEVEDO","QUINTANA","REPUBLICA ARGENTINA","RETIRO","REYES CATOLICOS","RIOS ROSAS","RIVAS FUTURA","RIVAS URBANIZACIONES","RIVAS VACIAMADRID","RONDA DE LA COMUNICACION","RUBEN DARIO","SAINZ DE BARANDA","SAN BERNARDO","SAN BLAS","SAN CIPRIANO","SAN CRISTOBAL","SAN FERMIN-ORCASUR","SAN FERNANDO","SAN FRANCISCO","SAN LORENZO","SAN NICASIO","SANTIAGO BERNABEU","SANTO DOMINGO","SERRANO","SEVILLA","SIERRA DE GUADALUPE","SIMANCAS","SOL","SUANZES","TETUAN","TIRSO DE MOLINA","TORRE ARIAS","TRES OLIVOS","TRIBUNAL","UNIVERSIDAD REY JUAN CARLOS","URGEL","USERA","VALDEACEDERAS","VALDEBERNARDO","VALDECARROS","VALDEZARZA","VELAZQUEZ","VENTAS","VENTILLA","VENTURA RODRIGUEZ","VICALVARO","VICENTE ALEIXANDRE","VILLA DE VALLECAS","VILLAVERDE ALTO","VILLAVERDE BAJO CRUCE","VINATEROS","VISTA ALEGRE"],[2,2,1,2,1,2,2,2,2,2,6,2,2,2,2,2,2,2,1,2,5,2,2,2,2,2,2,8,2,2,2,2,2,2,2,2,2,2,2,2,2,4,2,4,2,4,2,2,2,2,2,2,3,2,4,2,2,2,2,4,2,2,2,2,2,2,2,2,5,2,2,2,6,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,4,2,2,2,2,2,4,2,2,4,2,2,2,2,2,2,3,2,2,2,2,5,4,2,2,5,4,4,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,6,4,3,2,2,4,5,2,4,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,4,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,6,2,2,2,2,2,4,2,2,2,2,2,1,2,2,4,2,2,2,2,2,2,2,2,2],[0.037,0.042,0.026,0.03,0.027,0.025,0.044,0.042,0.052,0.022,0.055,0.035,0.042,0.036,0.034,0.047,0.048,0.035,0.018,0.045,0.05,0.02,0.03,0.04,0.038,0.041,0.046,0.054,0.032,0.033,0.041,0.034,0.039,0.052,0.028,0.044,0.037,0.026,0.041,0.021,0.039,0.054,0.038,0.053,0.036,0.051,0.037,0.032,0.035,0.031,0.038,0.05,0.039,0.023,0.042,0.053,0.035,0.041,0.045,0.048,0.053,0.037,0.048,0.048,0.028,0.021,0.025,0.05,0.05,0.032,0.047,0.046,0.053,0.043,0.023,0.029,0.047,0.023,0.025,0.048,0.035,0.036,0.046,0.03,0.045,0.046,0.034,0.035,0.042,0.035,0.019,0.038,0.023,0.052,0.054,0.055,0.046,0.021,0.035,0.034,0.039,0.018,0.02,0.021,0.019,0.023,0.051,0.05,0.047,0.022,0.028,0.023,0.023,0.039,0.044,0.025,0.027,0.026,0.048,0.024,0.029,0.019,0.024,0.031,0.045,0.039,0.032,0.03,0.024,0.029,0.05,0.024,0.046,0.05,0.019,0.024,0.04,0.034,0.053,0.022,0.02,0.04,0.023,0.039,0.046,0.047,0.034,0.032,0.047,0.033,0.021,0.051,0.042,0.052,0.053,0.052,0.039,0.052,0.039,0.048,0.029,0.046,0.035,0.047,0.019,0.036,0.018,0.026,0.024,0.037,0.034,0.035,0.041,0.046,0.04,0.029,0.044,0.054,0.04,0.04,0.021,0.053,0.051,0.048,0.043,0.044,0.028,0.045,0.046,0.027,0.051,0.044,0.051,0.052,0.02,0.049,0.022,0.024,0.021,0.027,0.053,0.05,0.052,0.034,0.029,0.031,0.037,0.023,0.033,0.038,0.024,0.049,0.051,0.052,0.053,0.03,0.036,0.054,0.037,0.042,0.05,0.035,0.034,0.055,0.022,0.038,0.043,0.042,0.033,0.023,0.038,0.051,0.051,0.041,0.051,0.03,0.045,0.029,0.028,0.033,0.043,0.037],[1180,659,0,478,0,1727,630,3774,209,1225,6952,478,703,1638,584,442,1035,1180,0,3187,764,792,240,2310,207,2748,938,7083,240,714,417,3589,514,1321,240,2343,714,1410,4146,478,2748,1678,1864,1951,821,589,92,478,662,478,437,2728,4473,518,3622,0,3244,1180,425,2570,458,3766,1018,4325,714,1009,1180,1162,2847,3412,4834,2616,3730,287,578,240,2263,467,2685,2767,692,40,960,1638,257,2748,552,714,1638,2530,395,2530,1440,1051,2749,9309,2112,240,478,72,3594,264,672,0,0,625,1150,831,0,478,3237,1654,458,714,948,0,478,1410,1037,1180,240,240,948,478,4295,478,1864,0,240,1864,2905,758,6188,96,321,768,562,87,5292,714,474,1868,948,432,3230,955,1410,240,536,2088,1083,539,2310,8021,889,4537,1126,1665,1509,5730,0,2666,948,2533,586,257,282,1944,1511,2088,948,300,2008,351,526,0,5153,5789,2445,2088,874,1988,5463,852,4307,2530,1180,836,884,3175,436,2068,0,1316,240,770,714,948,478,1638,584,6515,994,2088,1410,2890,3420,714,714,452,931,5017,554,364,1402,1180,2310,5584,948,87,1191,714,2310,6998,1297,371,2373,92,1864,0,1410,313,3523,948,250,1638,451,948,2713,3067,2530,845],[0,0,0,0,0,0,0,0.001,0,0.015,0,0,0,0,0,0,0,0,0,0,0,0.001,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.05,0,0,0,0,0,0,0,0,0.003,0,0,0,0,0,0,0,0,0.03,0,0,0.008,0.925,0,0,0,0,0,0,0,0,0,0,0,0,0,0.063,0,0,0,0,0,0,0,0.003,0,0,0,0,0,0,0,0,0,0,0.263,0.002,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.501,0.016,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0.162,0,0],[1.697,1.605,1.644,3.756,1.394,1.86,1.914,2.093,1.828,1.683,3.392,2.464,2.203,1.567,1.654,1.597,1.463,1.556,2.503,1.702,4.824,2.09,1.359,1.762,1.834,1.58,1.398,6.165,1.986,1.371,1.697,2.837,2.314,1.452,2.221,1.779,1.949,2.784,3.189,1.599,2.284,2.312,1.476,2.475,2.083,2.468,2.313,2.247,1.513,2.067,1.734,2.222,2.896,1.502,3.89,1.879,2.213,1.725,2.224,4.337,1.514,2.674,2.075,1.852,1.629,1.597,1.77,2.313,3.262,4.24,2.043,1.636,5.253,1.911,1.814,2.082,2.017,1.66,9.282,1.476,1.525,2.2,1.371,2.934,1.533,1.804,1.625,4.118,2.254,1.852,1.6,1.544,2.026,2.242,2.148,4.242,3.15,1.402,1.987,1.775,1.795,2.117,1.852,1.173,1.41,1.473,1.913,1.779,2.4,1.55,4.129,3.557,1.563,2.713,3.037,2.472,1.93,2.168,2.115,2.124,2.76,3.67,1.757,1.408,4.527,1.605,1.979,1.443,1.978,2.478,1.808,1.744,2.518,2.122,2.86,2.446,1.777,1.696,3.149,1.746,2.667,3.276,1.881,1.636,1.801,1.566,1.915,2.084,3.039,2.374,1.572,1.576,1.411,4.671,3.744,1.887,1.743,4.42,2.276,2.197,1.676,1.486,1.536,1.702,2.15,1.688,1.434,1.757,2.274,2.082,1.383,1.872,3.14,2.006,1.546,1.168,4.147,3.067,2.086,1.429,1.445,2.441,6.893,2.734,2.08,1.583,4.823,1.69,3.371,3.251,1.627,1.653,3.309,1.597,1.634,1.781,3.799,5.578,3.41,1.91,2.251,2.441,2.657,1.659,1.924,5.646,1.866,1.65,1.764,1.728,2.921,2.027,1.634,1.34,1.4,1.872,1.572,2.827,1.807,1.564,1.677,1.932,1.501,2.463,2.182,1.705,2.051,1.786,2.253,1.435,1.883,1.423,3.99,2.26,1.872,1.919,1.826,1.579,9.914,2.969,1.702,1.67],[0.004,0.004,0.003,0.005,0.002,0.004,0.004,0.004,0.002,0.004,0.007,0.005,0.004,0.004,0.004,0.003,0.004,0.004,0.003,0.003,0.007,0.005,0.005,0.004,0.004,0.003,0.003,0.01,0.004,0.004,0.003,0.004,0.004,0.003,0.004,0.004,0.004,0.005,0.004,0.004,0.004,0.004,0.004,0.004,0.004,0.005,0.004,0.005,0.003,0.004,0.004,0.003,0.005,0.004,0.007,0.003,0.004,0.004,0.004,0.007,0.003,0.004,0.003,0.003,0.004,0.003,0.004,0.003,0.006,0.005,0.003,0.003,0.007,0.003,0.004,0.005,0.003,0.004,0.007,0.003,0.003,0.005,0.003,0.006,0.004,0.004,0.004,0.006,0.004,0.004,0.003,0.004,0.004,0.005,0.004,0.006,0.007,0.004,0.004,0.004,0.004,0.004,0.004,0.002,0.003,0.003,0.003,0.003,0.004,0.005,0.005,0.003,0.004,0.005,0.004,0.004,0.005,0.005,0.003,0.005,0.006,0.006,0.005,0.005,0.005,0.003,0.004,0.002,0.006,0.005,0.003,0.003,0.007,0.003,0.006,0.003,0.004,0.004,0.005,0.004,0.005,0.005,0.004,0.004,0.004,0.004,0.005,0.005,0.004,0.005,0.003,0.003,0.003,0.007,0.005,0.003,0.003,0.007,0.007,0.007,0.003,0.004,0.003,0.003,0.005,0.004,0.003,0.003,0.005,0.004,0.003,0.004,0.004,0.003,0.004,0.002,0.008999999999999999,0.004,0.005,0.004,0.003,0.005,0.01,0.004,0.006,0.003,0.005,0.004,0.004,0.006,0.002,0.003,0.003,0.003,0.005,0.003,0.003,0.006,0.004,0.003,0.003,0.007,0.005,0.004,0.002,0.004,0.004,0.004,0.004,0.003,0.005,0.003,0.002,0.003,0.002,0.005,0.004,0.007,0.004,0.004,0.003,0.004,0.002,0.004,0.005,0.004,0.004,0.003,0.005,0.002,0.004,0.003,0.006,0.004,0.002,0.004,0.003,0.004,0.007,0.004,0.004,0.004]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Nodo<\/th>\n      <th>Grado<\/th>\n      <th>Cercania<\/th>\n      <th>Intermediacion<\/th>\n      <th>Autovector<\/th>\n      <th>Katz<\/th>\n      <th>PageRank<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Nodo","targets":1},{"name":"Grado","targets":2},{"name":"Cercania","targets":3},{"name":"Intermediacion","targets":4},{"name":"Autovector","targets":5},{"name":"Katz","targets":6},{"name":"PageRank","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="grado" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="grado"><span class="header-section-number">3.3.1</span> Grado</h3>
<p>Las estaciones con mayor centralidad de grado son AVENIDA DE AMERICA, SOL, PLAZA DE CASTILLA, DIEGO DE LEON, ALONSO MARTINEZ. Este resultado es coherente con su papel como intercambiadores, ya que en ellas confluyen tres o cuatro líneas distintas, lo que incrementa notablemente su número de conexiones directas dentro de la red.</p>
<p>Por el contrario, AEROPUERTO T-4, ALAMEDA DE OSUNA, ARGANDA DEL REY, HOSPITAL DEL HENARES, HOSPITAL INFANTA SOFIA presentan los valores más bajos de centralidad de grado entre otras. Esto se debe a que se sitúan en extremos de línea, donde únicamente están conectadas con una estación vecina, lo que limita su conectividad local dentro de la red.</p>
<p>Esta medida nos permite clasificar las estaciones en <strong>terminales</strong>, <strong>de paso</strong> o <strong>intercambiadores</strong>.</p>
</section>
<section id="cercanía" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="cercanía"><span class="header-section-number">3.3.2</span> Cercanía</h3>
<p>Las estaciones con mayor centralidad de cercanía son TRIBUNAL, GREGORIO MARAÑON, ALONSO MARTINEZ, SOL, PLAZA DE ESPAÑA. Estas estaciones, todas muy céntricas, se caracterizan por ocupar posiciones centrales dentro de la red, lo que les permite alcanzar al resto de estaciones mediante trayectos medios más cortos.</p>
<p>En el extremo opuesto, ARGANDA DEL REY, HOSPITAL DE FUENLABRADA, PARQUE EUROPA, FUENLABRADA CENTRAL, HOSPITAL INFANTA SOFIA presentan los valores más bajos de centralidad de cercanía. Estas estaciones se sitúan en zonas periféricas de la red, lo que implica mayores distancias al resto de estaciones y, por tanto, una menor accesibilidad global desde el punto de vista de la red.</p>
<p>Este resultado pone de manifiesto que la centralidad de cercanía capta de forma más clara la estructura radial y centralizada del metro de Madrid, penalizando las prolongaciones hacia la periferia.</p>
</section>
<section id="intermediación" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="intermediación"><span class="header-section-number">3.3.3</span> Intermediación</h3>
<p>Las estaciones con mayor centralidad de intermediación son GREGORIO MARAÑON, NUEVOS MINISTERIOS, AVENIDA DE AMERICA, TRIBUNAL, ALONSO MARTINEZ. Estas estaciones actúan como nodos de paso clave dentro de la red, apareciendo con frecuencia en los caminos más cortos que conectan pares de estaciones. Su elevada intermediación no solo se explica por el número de líneas que concentran como hemos visto en los grados, sino también por su posición como puntos de transición entre distintas zonas de la red.</p>
<p>Por otro lado, AEROPUERTO T-4, ALAMEDA DE OSUNA, ARGANDA DEL REY, CHUECA, HOSPITAL DEL HENARES presentan valores muy bajos de centralidad de intermediación. En la mayoría de los casos se trata de estaciones terminales o periféricas, que rara vez forman parte de rutas óptimas entre otros nodos. En el caso de estaciones como Chueca, su baja intermediación se debe a que se encuentran insertas en tramos lineales, donde existen alternativas equivalentes que reducen su papel como punto de paso obligado.</p>
<p>Esta medida identifica estaciones cuya disrupción tendría un impacto estructural mayor sobre la red, ya que concentran una parte significativa de los recorridos óptimos, mientras que las estaciones con valores bajos cumplen un papel más local dentro del sistema. Con esta medida podríamos identificar estaciones de paso o <strong>transbordo</strong> frente a estaciones <strong>destino</strong>.</p>
</section>
<section id="autovector" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="autovector"><span class="header-section-number">3.3.4</span> Autovector</h3>
<p>Las estaciones con mayor centralidad de autovector son VILLAVERDE ALTO, EL CASAR, SAN CRISTOBAL, JUAN DE LA CIERVA, VILLAVERDE BAJO CRUCE. Estas estaciones son todas adyacentes, lo que indica que la red posee clústeres de conectividad local muy potentes en el sur metropolitano. En este contexto, el autovector no premia el volumen de líneas que cruzan un nodo, sino la calidad de sus conexiones. Estas estaciones se benefician de estar rodeadas de vecinos que, a su vez, son fundamentales para la cohesión de tramos específicos como la Línea 12 (MetroSur) y la extensión de la Línea 3.</p>
<p>Por el contrario, ABRANTES, ACACIAS, AEROPUERTO T-4, AEROPUERTO T1-T2-T3, ALAMEDA DE OSUNA muestran valores bajos de centralidad de autovector. En estos casos, la baja puntuación se debe a que están conectadas principalmente con estaciones que también presentan baja influencia relativa dentro de la red, como ocurre en ramales periféricos o en prolongaciones hacia infraestructuras específicas como el aeropuerto.</p>
<p>Estos resultados ponen de relieve que la centralidad de autovector puede destacar áreas cohesionadas de la red que no necesariamente coinciden con los principales intercambiadores, aportando una perspectiva complementaria a las métricas de grado, cercanía e intermediación.</p>
</section>
<section id="katz-y-pagerank" class="level3" data-number="3.3.5">
<h3 data-number="3.3.5" class="anchored" data-anchor-id="katz-y-pagerank"><span class="header-section-number">3.3.5</span> Katz y Pagerank</h3>
<p>Las estaciones con mayor centralidad Katz y PageRank son, respectivamente VILLAVERDE ALTO, EL CASAR, PRINCIPE PIO, AVENIDA DE AMERICA, SAN CRISTOBAL y PRINCIPE PIO, AVENIDA DE AMERICA, PLAZA DE CASTILLA, VILLAVERDE ALTO, SOL. Estos algoritmos nos permiten observar la transición que veníamos viendo con la centralidad anterior desde la relevancia por proximidad estructural hacia la importancia operativa por intercambio. En el caso de la centralidad de Katz, la aparición de Villaverde Alto, El Casar y San Cristóbal junto a grandes nodos como Príncipe Pío y Avenida de América responde a la capacidad de este algoritmo para computar tanto los caminos cortos como la influencia total de los vecinos a largo alcance. Esto significa que las estaciones del sur de la red mantienen un peso elevado debido a su posición como puertas de entrada a grandes extensiones de la malla, mientras que Príncipe Pío y Avenida de América consolidan su posición como hubs de distribución masiva donde convergen múltiples ramales.</p>
<p>Por el contrario, PITIS, HOSPITAL DEL HENARES, SERRANO, ARROYOFRESNO, AVENIDA DE LA ILUSTRACION y ALAMEDA DE OSUNA, ALONSO CANO, HOSPITAL DEL HENARES, LAS ROSAS, PITIS destacan como las estaciones con medidas más bajas. La presencia de estaciones como Pitis, Hospital del Henares, Arroyofresno o Alameda de Osuna en ambas métricas confirma su naturaleza de nodos periféricos con escasa redundancia. Al ser estaciones terminales o situarse en tramos lineales de baja densidad de transbordo, su probabilidad de ser transitadas de forma incidental es mínima. El caso de Alameda de Osuna o Las Rosas es especialmente ilustrativo, ya que, a pesar de su relevancia local para el usuario, se reduce drásticamente su centralidad cuando hablamos de modelos que priorizan la circulación continua o la redistribución de carga por toda la infraestructura.</p>
<p>El análisis de la red de Metro de Madrid revela una dualidad estructural: mientras el grado, la cercanía y la intermediación confirman un núcleo central e intercambiador (Sol, Avenida de América, Nuevos Ministerios) que garantiza la eficiencia y accesibilidad global, las métricas de autovector, Katz y PageRank visibilizan la potencia de clústeres periféricos como los del sur metropolitano. Por otro lado, estas medidas penalizan sistemáticamente a las estaciones terminales y tramos lineales (como Alameda de Osuna o Pitis) que, por su baja redundancia, operan como destinos locales con mínima influencia en el flujo sistémico de la infraestructura.</p>
</section>
</section>
<section id="cluster" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="cluster"><span class="header-section-number">3.4</span> Cluster</h2>
<p>Podemos agrupar las estaciones en comunidades con el objetivo de encontrar estaciones fuertemente conectadas o aristas críticas que unan dos comunidades. Para ello podemos emplear varios métodos de clustering como <code>k-means</code> o elaborar un dendograma. En este caso vamos a elaborar un dendograma ya que nos permite hacer clusters con una distancia intracluster específica.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">distances</span>(grafo)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>hc <span class="ot">&lt;-</span> <span class="fu">hclust</span>(<span class="fu">as.dist</span>(d), <span class="at">method =</span> <span class="st">"complete"</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>grupos <span class="ot">&lt;-</span> <span class="fu">cutree</span>(hc, <span class="at">h =</span> <span class="dv">45</span>)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>num_clusters <span class="ot">&lt;-</span> <span class="fu">max</span>(grupos)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>En este caso, hemos elaborados grupos de 45 minutos y hemos obtenido 12 grupos distintos. Veamos cada uno de ellos:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false" href="">4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-5" role="tab" aria-controls="tabset-3-5" aria-selected="false" href="">5</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-6" role="tab" aria-controls="tabset-3-6" aria-selected="false" href="">6</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-7" role="tab" aria-controls="tabset-3-7" aria-selected="false" href="">7</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-8" role="tab" aria-controls="tabset-3-8" aria-selected="false" href="">8</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-9" role="tab" aria-controls="tabset-3-9" aria-selected="false" href="">9</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-10" role="tab" aria-controls="tabset-3-10" aria-selected="false" href="">10</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-11" role="tab" aria-controls="tabset-3-11" aria-selected="false" href="">11</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-12" role="tab" aria-controls="tabset-3-12" aria-selected="false" href="">12</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
Representando Cluster N°: 1 con 9 nodos.
<div id="htmlwidget-f5658d95ce2739f00513" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-f5658d95ce2739f00513">{"x":{"links":{"source":[4,0,0,1,2,3,6,7],"target":[5,5,1,2,3,6,7,8],"colour":["#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7"]},"nodes":{"name":["LA GRANJA","LA MORALEJA","MARQUES DE LA VALDAVIA","MANUEL DE FALLA","LAS TABLAS","RONDA DE LA COMUNICACION","BAUNATAL","REYES CATOLICOS","HOSPITAL INFANTA SOFIA"],"group":["10","10","10","10","10","10","10","10","10"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"10\"])\n      .range([\"#0A6EB7\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
Representando Cluster N°: 2 con 31 nodos.
<div id="htmlwidget-def0cd0a59ef0dba84ea" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-def0cd0a59ef0dba84ea">{"x":{"links":{"source":[0,1,2,3,4,5,28,29,26,26,6,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,2,24,16],"target":[1,2,3,4,5,28,29,30,30,27,27,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25,25,19],"colour":["#0A6EB7","black","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","#AEA51D","black"]},"nodes":{"name":["JOAQUIN VILUMBRALES","PUERTA DEL SUR","PUERTA DEL SUR","PARQUE LISBOA","ALCORCON CENTRAL","PARQUE OESTE","LORANCA","HOSPITAL DE FUENLABRADA","PARQUE EUROPA","FUENLABRADA CENTRAL","PARQUE DE LOS ESTADOS","ARROYO CULEBRO","CONSERVATORIO","ALONSO DE MENDOZA","GETAFE CENTRAL","JUAN DE LA CIERVA","EL CASAR","LOS ESPARTALES","EL BERCIAL","EL CASAR","EL CARRASCAL","JULIAN BESTEIRO","CASA DEL RELOJ","HOSPITAL SEVERO OCHOA","LEGANES CENTRAL","SAN NICASIO","HOSPITAL DE MOSTOLES","MANUELA MALASAÑA","UNIVERSIDAD REY JUAN CARLOS","MOSTOLES CENTRAL","PRADILLO"],"group":["10","10","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","12","3","12","12","12","12","12","12","12","12","12","12","12"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"10\", \"12\", \"3\"])\n      .range([\"#0A6EB7\", \"#AEA51D\", \"#FACB4B\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
Representando Cluster N°: 3 con 5 nodos.
<div id="htmlwidget-9973ace831e68f05273b" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-9973ace831e68f05273b">{"x":{"links":{"source":[1,0,2,3],"target":[3,1,4,4],"colour":["#932C7C","#932C7C","#932C7C","#932C7C"]},"nodes":{"name":["ARGANDA DEL REY","LA POVEDA","RIVAS URBANIZACIONES","RIVAS VACIAMADRID","RIVAS FUTURA"],"group":["9","9","9","9","9"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"9\"])\n      .range([\"#932C7C\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
Representando Cluster N°: 4 con 7 nodos.
<div id="htmlwidget-3a1a17e0f35d9c45ad2e" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-3a1a17e0f35d9c45ad2e">{"x":{"links":{"source":[0,1,2,4,5,3],"target":[1,2,4,5,6,6],"colour":["#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A"]},"nodes":{"name":["BARRIO DEL PUERTO","COSLADA CENTRAL","LA RAMBLA","HOSPITAL DEL HENARES","SAN FERNANDO","JARAMA","HENARES"],"group":["7","7","7","7","7","7","7"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"7\"])\n      .range([\"#F6910A\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-5-tab">
Representando Cluster N°: 5 con 7 nodos.
<div id="htmlwidget-f84f03830ebf181fff57" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-f84f03830ebf181fff57">{"x":{"links":{"source":[1,2,3,4,5,0],"target":[2,3,4,5,6,6],"colour":["#135C2B","#135C2B","#135C2B","#135C2B","#135C2B","#135C2B"]},"nodes":{"name":["LA FORTUNA","PLAZA ELIPTICA","ABRANTES","PAN BENDITO","SAN FRANCISCO","CARABANCHEL ALTO","LA PESETA"],"group":["11","11","11","11","11","11","11"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"11\"])\n      .range([\"#135C2B\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-6-tab">
Representando Cluster N°: 6 con 18 nodos.
<div id="htmlwidget-25cfcaac38c97b5c8299" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-25cfcaac38c97b5c8299">{"x":{"links":{"source":[5,6,7,8,9,10,11,12,3,3,4,0,0,1,2,16,15],"target":[6,7,8,9,10,11,12,14,14,13,13,4,1,2,16,17,17],"colour":["#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2","#38A8E2"]},"nodes":{"name":["SIERRA DE GUADALUPE","VILLA DE VALLECAS","CONGOSTO","BUENOS AIRES","MIGUEL HERNANDEZ","TIRSO DE MOLINA","ANTON MARTIN","ESTACION DEL ARTE","ATOCHA","MENENDEZ PELAYO","PACIFICO","PUENTE DE VALLECAS","NUEVA NUMANCIA","ALTO DEL ARENAL","PORTAZGO","VALDECARROS","LA GAVIA","LAS SUERTES"],"group":["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"1\"])\n      .range([\"#38A8E2\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-7-tab">
Representando Cluster N°: 7 con 73 nodos.
<div id="htmlwidget-8f2f56fd2dc523804009" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-8f2f56fd2dc523804009">{"x":{"links":{"source":[17,17,18,19,11,19,20,21,14,15,17,15,40,14,11,10,11,12,13,13,51,51,53,47,34,54,48,55,54,47,8,8,34,47,48,40,49,26,17,39,1,39,42,41,42,10,24,43,16,44,66,27,46,15,0,0,1,2,3,3,4,5,5,6,26,70,50,31,30,31,32,33,35,8,34,35,26,37,26,27,12,23,20,28,16,23,24,16],"target":[62,18,63,63,19,20,21,22,59,59,60,60,60,57,57,57,12,58,58,52,52,53,54,54,55,55,55,56,64,64,64,9,48,48,49,50,50,50,40,40,39,41,65,65,43,43,44,44,44,45,68,68,66,46,46,1,2,71,71,4,69,69,6,7,72,72,72,70,31,32,33,34,67,67,67,36,38,38,27,28,28,29,29,29,24,24,25,61],"colour":["#38A8E2","#38A8E2","#38A8E2","#38A8E2","black","#38A8E2","#38A8E2","#38A8E2","#DB0B15","#DB0B15","black","#DB0B15","black","black","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","black","black","#A46645","black","#A46645","black","black","#80B91F","#80B91F","black","#A29C99","#A29C99","#A29C99","#A29C99","black","black","#A29C99","black","#A29C99","#A29C99","#A29C99","#A29C99","black","black","#A29C99","black","#A29C99","#F6910A","black","#F6910A","black","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","black","#E96198","black","black","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","black","#932C7C","#932C7C","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7","black","#0A6EB7","black","#0A6EB7","black","#0A6EB7","#0A6EB7","#156CB2"]},"nodes":{"name":["ISLAS FILIPINAS","GUZMAN EL BUENO","FRANCOS RODRIGUEZ","ANTONIO MACHADO","PEÑAGRANDE","LACOMA","ARROYOFRESNO","PITIS","NUÑEZ DE BALBOA","RUBEN DARIO","ARGÜELLES","BILBAO","ALONSO MARTINEZ","SERRANO","SAN BERNARDO","CANAL","PRINCIPE PIO","CUATRO CAMINOS","RIOS ROSAS","BILBAO","TRIBUNAL","GRAN VIA","SOL","PLAZA DE ESPAÑA","PRINCIPE PIO","LAGO","NUEVOS MINISTERIOS","GREGORIO MARAÑON","ALONSO MARTINEZ","TRIBUNAL","PIO XII","COLOMBIA","CONCHA ESPINA","CRUZ DEL RAYO","AVENIDA DE AMERICA","PRINCIPE DE VERGARA","IBIZA","CUZCO","SANTIAGO BERNABEU","GUZMAN EL BUENO","CUATRO CAMINOS","VICENTE ALEIXANDRE","MONCLOA","ARGÜELLES","PRINCIPE PIO","PUERTA DEL ANGEL","CANAL","DIEGO DE LEON","AVENIDA DE AMERICA","REPUBLICA ARGENTINA","NUEVOS MINISTERIOS","GOYA","VELAZQUEZ","LISTA","DIEGO DE LEON","AVENIDA DE AMERICA","PROSPERIDAD","SAN BERNARDO","COLON","QUEVEDO","CUATRO CAMINOS","OPERA","ALVARADO","IGLESIA","DIEGO DE LEON","CIUDAD UNIVERSITARIA","ALONSO CANO","NUÑEZ DE BALBOA","GREGORIO MARAÑON","AVENIDA DE LA ILUSTRACION","COLOMBIA","VALDEZARZA","NUEVOS MINISTERIOS"],"group":["7","7","7","7","7","7","7","7","5","5","4","4","4","4","2","2","R","1","1","1","1","1","1","10","10","10","10","10","10","10","9","9","9","9","9","9","9","10","10","6","6","6","6","6","6","6","7","6","6","6","6","4","4","4","4","4","4","4","4","2","2","R","1","1","5","6","7","9","7","7","8","7","8"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"7\", \"5\", \"4\", \"2\", \"R\", \"1\", \"10\", \"9\", \"6\", \"8\"])\n      .range([\"#F6910A\", \"#80B91F\", \"#A46645\", \"#DB0B15\", \"#156CB2\", \"#38A8E2\", \"#0A6EB7\", \"#932C7C\", \"#A29C99\", \"#E96198\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-8-tab">
Representando Cluster N°: 8 con 30 nodos.
<div id="htmlwidget-e87eb79650cf128e8912" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-e87eb79650cf128e8912">{"x":{"links":{"source":[7,8,9,10,0,1,2,3,4,5,6,11,12,13,14,4,14,16,15,16,17,0,24,8,11,22,26,27,28],"target":[8,9,19,19,1,2,3,4,5,6,7,12,13,20,20,15,15,21,21,17,18,25,25,22,23,26,27,28,29],"colour":["black","#DB0B15","#DB0B15","#DB0B15","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#F6910A","#F6910A","#F6910A","#F6910A","black","#F6910A","#F6910A","#F6910A","#F6910A","#F6910A","#80B91F","#80B91F","#DB0B15","#F6910A","#DB0B15","#DB0B15","#DB0B15","#DB0B15"]},"nodes":{"name":["CANILLEJAS","TORRE ARIAS","SUANZES","CIUDAD LINEAL","PUEBLO NUEVO","QUINTANA","EL CARMEN","VENTAS","VENTAS","MANUEL BECERRA","PRINCIPE DE VERGARA","LAS MUSAS","SAN BLAS","SIMANCAS","ASCAO","PUEBLO NUEVO","PARQUE DE LAS AVENIDAS","CARTAGENA","AVENIDA DE AMERICA","GOYA","GARCIA NOBLEJAS","BARRIO DE LA CONCEPCION","LA ELIPA","ESTADIO METROPOLITANO","ALAMEDA DE OSUNA","EL CAPRICHO","LA ALMUDENA","ALSACIA","AVENIDA DE GUADALAJARA","LAS ROSAS"],"group":["5","5","5","5","5","5","5","5","2","2","2","7","7","7","7","7","7","7","7","2","7","7","2","7","5","5","2","2","2","2"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"5\", \"2\", \"7\"])\n      .range([\"#80B91F\", \"#DB0B15\", \"#F6910A\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-9-tab">
Representando Cluster N°: 9 con 46 nodos.
<div id="htmlwidget-83034c42a0c8ef11e42b" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-83034c42a0c8ef11e42b">{"x":{"links":{"source":[13,30,14,11,6,11,12,3,3,4,5,6,6,7,8,8,10,0,1,7,2,17,11,17,18,18,25,25,16,19,20,21,21,22,23,9,15,23,24,9,38,39,40,41,42,43],"target":[30,31,31,14,14,29,29,9,4,5,27,27,7,28,28,32,32,1,2,33,33,33,17,34,34,35,35,26,19,20,36,36,22,37,37,23,16,45,45,38,39,40,41,42,43,44],"colour":["#DB0B15","#DB0B15","#DB0B15","#DB0B15","black","#DB0B15","#DB0B15","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#80B91F","#80B91F","black","#80B91F","#80B91F","black","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","#A29C99","black","#A29C99","#A29C99","#A29C99","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B","#FACB4B"]},"nodes":{"name":["ALONSO MARTINEZ","CHUECA","GRAN VIA","DELICIAS","PALOS DE LA FRONTERA","EMBAJADORES","SOL","CALLAO","VENTURA RODRIGUEZ","LEGAZPI","MONCLOA","OPERA","NOVICIADO","RETIRO","SOL","ALTO DE EXTREMADURA","LUCERO","OPERA","PUERTA DE TOLEDO","LAGUNA","CARPETANA","OPAÑEL","PLAZA ELIPTICA","LEGAZPI","MENDEZ ALVARO","PIRAMIDES","MARQUES DE VADILLO","LAVAPIES","PLAZA DE ESPAÑA","SANTO DOMINGO","BANCO DE ESPAÑA","SEVILLA","ARGÜELLES","CALLAO","LA LATINA","ACACIAS","OPORTO","USERA","ALMENDRALES","HOSPITAL 12 DE OCTUBRE","SAN FERMIN-ORCASUR","CIUDAD DE LOS ANGELES","VILLAVERDE BAJO CRUCE","SAN CRISTOBAL","VILLAVERDE ALTO","ARGANZUELA-PLANETARIO"],"group":["5","5","5","3","3","3","3","3","3","3","3","2","2","2","2","6","6","5","5","6","6","6","6","6","6","5","5","3","3","2","2","2","3","5","5","5","6","6","3","3","3","3","3","3","3","6"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"5\", \"3\", \"2\", \"6\"])\n      .range([\"#80B91F\", \"#FACB4B\", \"#DB0B15\", \"#A29C99\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-10-tab">
Representando Cluster N°: 10 con 37 nodos.
<div id="htmlwidget-ac3bb2d84045802b9742" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-ac3bb2d84045802b9742">{"x":{"links":{"source":[0,1,2,13,12,13,14,15,16,17,10,16,10,20,3,3,0,4,5,7,8,0,5,9,24,9,26,0,26,18,28,27,29,7,31,21,11,35],"target":[1,19,19,22,22,14,15,16,17,18,24,24,20,21,11,4,5,5,6,8,9,23,23,23,25,34,34,34,27,28,29,30,30,31,32,33,35,36],"colour":["#38A8E2","#38A8E2","#38A8E2","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#A46645","#E96198","black","#E96198","#E96198","#932C7C","#932C7C","black","#932C7C","#932C7C","#0A6EB7","#0A6EB7","black","black","#0A6EB7","#E96198","black","#38A8E2","#38A8E2","#38A8E2","#A46645","#A46645","black","#A46645","#0A6EB7","#0A6EB7","#E96198","#932C7C","#932C7C"]},"nodes":{"name":["PLAZA DE CASTILLA","VALDEACEDERAS","ESTRECHO","BARRIO DEL PILAR","VENTILLA","PLAZA DE CASTILLA","DUQUE DE PASTRANA","FUENCARRAL","BEGOÑA","CHAMARTIN","FERIA DE MADRID","HERRERA ORIA","ALFONSO XIII","ARTURO SORIA","ESPERANZA","CANILLAS","MAR DE CRISTAL","SAN LORENZO","PARQUE DE SANTA MARIA","TETUAN","AEROPUERTO T1-T2-T3","BARAJAS","AVENIDA DE LA PAZ","PLAZA DE CASTILLA","MAR DE CRISTAL","PINAR DEL REY","BAMBU","PINAR DE CHAMARTIN","HORTALEZA","MANOTERAS","PINAR DE CHAMARTIN","TRES OLIVOS","MONTECARMELO","AEROPUERTO T-4","CHAMARTIN","MIRASIERRA","PACO DE LUCIA"],"group":["1","1","1","9","9","9","9","10","10","10","8","9","4","4","4","4","4","4","4","1","8","8","4","10","8","8","1","1","4","4","4","10","10","8","1","9","9"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"1\", \"9\", \"10\", \"8\", \"4\"])\n      .range([\"#38A8E2\", \"#932C7C\", \"#0A6EB7\", \"#E96198\", \"#A46645\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-11-tab">
Representando Cluster N°: 11 con 14 nodos.
<div id="htmlwidget-abe6da2f533172b7a7b4" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-abe6da2f533172b7a7b4">{"x":{"links":{"source":[3,4,5,6,7,8,9,10,1,0,1,2,12],"target":[4,5,6,7,8,9,10,11,11,1,2,13,13],"colour":["#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","#80B91F","black","#0A6EB7","#0A6EB7","#0A6EB7","#0A6EB7"]},"nodes":{"name":["BATAN","CASA DE CAMPO","COLONIA JARDIN","URGEL","OPORTO","VISTA ALEGRE","CARABANCHEL","EUGENIA DE MONTIJO","ALUCHE","EMPALME","CAMPAMENTO","CASA DE CAMPO","CUATRO VIENTOS","AVIACION ESPAÑOLA"],"group":["10","10","10","5","5","5","5","5","5","5","5","5","10","10"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"10\", \"5\"])\n      .range([\"#0A6EB7\", \"#80B91F\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="tabset-3-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-12-tab">
Representando Cluster N°: 12 con 14 nodos.
<div id="htmlwidget-c09ed24d8a3b01da8947" class="forceNetwork html-widget html-fill-item" style="width:100%;height:338px;">

</div>
<script type="application/json" data-for="htmlwidget-c09ed24d8a3b01da8947">{"x":{"links":{"source":[9,10,11,0,11,0,1,2,3,4,5,6,7],"target":[10,13,13,13,12,1,2,3,4,5,6,7,8],"colour":["#A29C99","#A29C99","#A29C99","black","#A29C99","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C","#932C7C"]},"nodes":{"name":["SAINZ DE BARANDA","ESTRELLA","VINATEROS","ARTILLEROS","PAVONES","VALDEBERNARDO","VICALVARO","SAN CIPRIANO","PUERTA DE ARGANDA","PACIFICO","CONDE DE CASAL","O'DONNELL","MANUEL BECERRA","SAINZ DE BARANDA"],"group":["9","9","9","9","9","9","9","9","9","6","6","6","6","6"]},"options":{"NodeID":"name","Group":"group","colourScale":"d3.scaleOrdinal()\n      .domain([\"9\", \"6\"])\n      .range([\"#932C7C\", \"#A29C99\"])","fontSize":20,"fontFamily":"Arial","clickTextSize":50,"linkDistance":50,"linkWidth":"3","charge":-400,"opacity":1,"zoom":true,"legend":false,"arrows":false,"nodesize":false,"radiusCalculation":" Math.sqrt(d.nodesize)+6","bounded":false,"opacityNoHover":1,"clickAction":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<p>Tras algunos ajustes en favor de la claridad llegamos a esta segmentación de la red</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="cluster.jpg" class="img-fluid figure-img"></p>
<figcaption><a href="https://www.metromadrid.es/sites/default/files/planoesquematico.pdf">Mapa del suburbano</a> con las siluetas de los clusters superpuestas</figcaption>
</figure>
</div>
<p>El clustering muestra una estructura altamente coherente con la organización real de la red. Los ramales periféricos largos y con escasa conectividad forman clusters claramente delimitados, como en los corredores de Arganda–Rivas, Coslada–Henares o el norte de la línea 10. Este resultado confirma que el modelo captura adecuadamente las restricciones temporales impuestas por la red.</p>
<p>Por el contrario, las zonas centrales generan clusters de gran tamaño que agrupan estaciones de múltiples líneas, con nodos como Sol, Gran Vía, Nuevos Ministerios o Atocha actuando como núcleos de accesibilidad. Esto evidencia que, desde una perspectiva temporal, el centro de Madrid constituye un espacio altamente compacto, incluso cuando las distancias geográficas son significativas.</p>
<p>Una conclusión relevante es que la centralidad temporal no coincide necesariamente con la centralidad geográfica. Estaciones alejadas del centro urbano pueden integrarse en clusters centrales gracias a su buena conectividad y a la presencia de intercambiadores, como es el caso del sur de la línea 3.</p>
<p>El análisis también pone de manifiesto una mayor fragmentación en el sur de la red frente a una estructura más homogénea en el norte. Esta diferencia sugiere una menor redundancia de trayectorias en el sur y una mayor dependencia de intercambiadores clave para mantener la conectividad temporal.</p>
<p>La aparición de clusters centrales sobredimensionados es consecuencia de la alta densidad de intercambios en estas zonas, donde el clustering pierde resolución espacial. Asimismo, estaciones como Manuel Becerra o Plaza Elíptica actúan como nodos frontera entre clusters, reflejando su papel como puntos de transición dentro de la red.</p>
</section>
<section id="análisis-de-vulnerabilidad" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="análisis-de-vulnerabilidad"><span class="header-section-number">3.5</span> Análisis de vulnerabilidad</h2>
<p>Con el objetivo de analizar la vulnerabilidad de la red, se estudia el efecto de eliminar individualmente cada estación y medir el incremento relativo del tiempo medio de viaje. La idea es identificar aquellas estaciones cuya desaparición provoca un mayor deterioro en la eficiencia global del sistema, interpretándolas como nodos críticos desde el punto de vista de la accesibilidad.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tiempo_base <span class="ot">&lt;-</span> <span class="fu">mean_distance</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                grafo_sin_transbordos,</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">weights =</span> <span class="fu">E</span>(grafo_sin_transbordos)<span class="sc">$</span>weight,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">unconnected =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">details =</span> <span class="cn">FALSE</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>              )</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>              </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>incremento <span class="ot">&lt;-</span> <span class="fu">c</span>()</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span> <span class="sc">:</span> <span class="fu">length</span>(<span class="fu">V</span>(grafo_sin_transbordos))){</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  grafo_aux <span class="ot">&lt;-</span> <span class="fu">delete_vertices</span>(grafo_sin_transbordos, <span class="fu">V</span>(grafo_sin_transbordos)[i])</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">is_connected</span>(grafo_aux)){</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    tiempo <span class="ot">&lt;-</span> <span class="fu">mean_distance</span>(</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>      grafo_aux,</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">weights =</span> <span class="fu">E</span>(grafo_aux)<span class="sc">$</span>weight,</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">unconnected =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">details =</span> <span class="cn">FALSE</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(tiempo<span class="sc">&gt;</span>tiempo_base){</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>      incremento[<span class="fu">V</span>(grafo_sin_transbordos)<span class="sc">$</span>label[i]]<span class="ot">=</span><span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span>(tiempo<span class="sc">-</span>tiempo_base)<span class="sc">/</span>tiempo_base,<span class="dv">2</span>)</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>El tiempo medio base es 29.29 minutos. Para cada estación se ha calculado el incremento porcentual del tiempo medio tras su eliminación, considerando únicamente los casos en los que la red permanece conexa y en los que el tiempo medio aumenta respecto al valor base.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-0cb523c5aae2ac168663" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0cb523c5aae2ac168663">{"x":{"filter":"none","vertical":false,"data":[["LEGAZPI","CASA DE CAMPO","ALMENDRALES","COLONIA JARDIN","HOSPITAL 12 DE OCTUBRE","PRINCIPE PIO","AVIACION ESPAÑOLA","PUERTA DEL SUR","SAN FERMIN-ORCASUR","CUATRO VIENTOS","CIUDAD DE LOS ANGELES","JOAQUIN VILUMBRALES","LAGO","BATAN","VILLAVERDE BAJO CRUCE","EL CASAR","AVENIDA DE AMERICA","PARQUE LISBOA","SAN CRISTOBAL","VILLAVERDE ALTO","ALCORCON CENTRAL","SOL","JUAN DE LA CIERVA","CONDE DE CASAL","PARQUE OESTE","NUEVOS MINISTERIOS","ALONSO MARTINEZ","MENDEZ ALVARO","ARGANZUELA-PLANETARIO","GETAFE CENTRAL","USERA","COLOMBIA","UNIVERSIDAD REY JUAN CARLOS","OPERA","MANUEL BECERRA","GREGORIO MARAÑON","LAVAPIES","PLAZA DE ESPAÑA","PINAR DEL REY","ALONSO DE MENDOZA","EMBAJADORES","OPORTO","TRIBUNAL","CUATRO CAMINOS","PALOS DE LA FRONTERA","DELICIAS","SANTIAGO BERNABEU","O'DONNELL","LA LATINA","MOSTOLES CENTRAL","CUZCO","PROSPERIDAD","EL CARMEN","QUINTANA","OPAÑEL","DIEGO DE LEON","CONSERVATORIO","PUERTA DEL ANGEL","TIRSO DE MOLINA","PUERTA DE TOLEDO","CARTAGENA","ALFONSO XIII","PRINCIPE DE VERGARA","SAN NICASIO","VISTA ALEGRE","ANTON MARTIN","CAMPAMENTO","PRADILLO","PARQUE DE LAS AVENIDAS","MENENDEZ PELAYO","CRUZ DEL RAYO","ESTACION DEL ARTE","SEVILLA","GRAN VIA","LOS ESPARTALES","ACACIAS","ARGÜELLES","ATOCHA","ALTO DE EXTREMADURA","RETIRO","BANCO DE ESPAÑA","CARABANCHEL","CONCHA ESPINA","BARRIO DE LA CONCEPCION","EMPALME","GOYA","SAN BERNARDO","BILBAO","CANAL","LEGANES CENTRAL","ALVARADO","COLON","AVENIDA DE LA PAZ","EUGENIA DE MONTIJO","ALUCHE","CALLAO","NUÑEZ DE BALBOA","BAMBU","IBIZA","PIRAMIDES","LUCERO","SAN LORENZO","SANTO DOMINGO","ARROYO CULEBRO","QUEVEDO","SERRANO","ALONSO CANO","MONCLOA","NOVICIADO","VELAZQUEZ","VENTURA RODRIGUEZ","EL BERCIAL","RUBEN DARIO","PIO XII","IGLESIA","CHUECA","CARPETANA","DUQUE DE PASTRANA","RIOS ROSAS","VICENTE ALEIXANDRE","HOSPITAL SEVERO OCHOA","LAGUNA","LISTA","REPUBLICA ARGENTINA","URGEL","ESTRECHO","MARQUES DE VADILLO","CIUDAD UNIVERSITARIA","ISLAS FILIPINAS","VALDEACEDERAS","ARTURO SORIA","TETUAN","EL CARRASCAL","HOSPITAL DE MOSTOLES","CASA DEL RELOJ","PINAR DE CHAMARTIN","PARQUE DE SANTA MARIA","CANILLAS","JULIAN BESTEIRO","ESPERANZA","MANOTERAS","HORTALEZA"],[12.58,10.05,9.58,8.529999999999999,8.32,7.66,7.55,7.24,7.15,6.71,6.09,6.09,5.98,5.61,5.15,4.95,4.75,4.65,4.33,3.68,3.6,3.22,2.93,2.77,2.66,2.36,2.33,2.18,2.17,2.15,2.07,1.99,1.87,1.82,1.78,1.77,1.63,1.58,1.5,1.46,1.45,1.38,1.36,1.34,1.34,1.32,1.3,1.25,1.24,1.24,1.17,1.17,1.11,0.99,0.98,0.89,0.87,0.87,0.87,0.85,0.83,0.74,0.72,0.71,0.71,0.6899999999999999,0.68,0.68,0.62,0.6,0.59,0.59,0.59,0.58,0.58,0.5600000000000001,0.5600000000000001,0.5600000000000001,0.55,0.53,0.52,0.52,0.52,0.51,0.5,0.5,0.49,0.48,0.45,0.45,0.43,0.43,0.41,0.41,0.4,0.4,0.4,0.38,0.37,0.37,0.36,0.36,0.36,0.35,0.35,0.35,0.34,0.34,0.34,0.34,0.34,0.33,0.33,0.32,0.31,0.3,0.28,0.28,0.28,0.28,0.27,0.27,0.27,0.27,0.27,0.26,0.26,0.24,0.23,0.21,0.19,0.19,0.18,0.18,0.15,0.15,0.14,0.13,0.12,0.08,0.04,0.03]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>incremento<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":1},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"incremento","targets":1}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Los resultados muestran que las estaciones con mayor impacto no coinciden necesariamente con las más céntricas o conocidas, sino con nodos que articulan corredores completos o conectan grandes áreas periféricas. Destacan especialmente estaciones como Legazpi, Casa de Campo, Almendrales o Colonia Jardín, cuya eliminación incrementa el tiempo medio de viaje en más de un 7 %. Estas estaciones actúan como puntos de paso obligados entre el resto de la red y Metrosur, por lo que su pérdida genera desvíos largos y menos eficientes.</p>
<p>También aparecen con valores elevados estaciones asociadas a grandes infraestructuras o intercambiadores del sur y oeste metropolitano, como Príncipe Pío o Puerta del Sur. Esto refuerza la idea de que la vulnerabilidad temporal está fuertemente relacionada con la estructura radial de la red y con la dependencia de ciertos ejes para mantener trayectos competitivos.</p>
<p>En contraste, estaciones del centro histórico como Sol, Gran Vía o Plaza de España presentan incrementos relativamente moderados. Aunque son nodos muy transitados, la alta densidad de conexiones alternativas en el centro permite absorber mejor la eliminación de una estación sin que el tiempo medio global se dispare.</p>
</section>
</section>
<section id="conclusiones" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Conclusiones</h1>
<p>El modelado del Metro de Madrid como un grafo ponderado ha permitido extraer conclusiones relevantes sobre su estructura y funcionamiento más allá de una mera representación topológica. Las distintas métricas de centralidad ponen de manifiesto una red fuertemente jerarquizada, con un núcleo central muy redundante y eficiente frente a corredores periféricos más frágiles y dependientes de nodos concretos.</p>
<p>El análisis de clustering confirma esta dualidad, mostrando una compacidad temporal elevada en el centro y una mayor fragmentación en la periferia, especialmente en el sur metropolitano. Finalmente, el estudio de vulnerabilidad revela que la importancia de una estación no se mide únicamente por su notoriedad o volumen de tráfico, sino por su papel estructural en la conectividad global, identificando nodos cuya eliminación compromete seriamente la eficiencia del sistema.</p>
<p>En conjunto, este trabajo demuestra cómo las herramientas de análisis de redes permiten comprender y evaluar infraestructuras reales desde una perspectiva cuantitativa, aportando criterios objetivos útiles para la planificación, el mantenimiento y la toma de decisiones estratégicas.</p>
<p>Como posibles líneas de trabajo futuro, este análisis podría ampliarse incorporando información dinámica sobre la demanda, como flujos reales de viajeros por franja horaria, lo que permitiría estudiar la congestión y la robustez de la red en condiciones de carga realista. Asimismo, resultaría interesante introducir pesos dependientes del tiempo (frecuencias, tiempos de espera o incidencias) para aproximar el modelo a la experiencia real del usuario.</p>
<p>Desde el punto de vista metodológico, podrían explorarse modelos de fallos simultáneos para evaluar escenarios de disrupción más complejos, así como técnicas de optimización para proponer refuerzos de la red o nuevas conexiones que minimicen la vulnerabilidad detectada. Por último, la comparación con otras redes de metro mediante métricas normalizadas permitiría contextualizar el desempeño del Metro de Madrid dentro de un marco más amplio de infraestructuras urbanas.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>